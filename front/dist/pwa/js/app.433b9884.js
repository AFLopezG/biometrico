(()=>{var e={1593:(e,o,l)=>{"use strict";l(702),l(8964);var t=l(1957),i=l(1947),a=l(499),n=l(9835);function s(e,o,l,t,i,a){const s=(0,n.up)("router-view");return(0,n.wg)(),(0,n.j4)(s)}const d=(0,n.aZ)({name:"App"});var r=l(1639);const c=(0,r.Z)(d,[["render",s]]),u=c;var p=l(3340),m=l(3746);const h=(0,p.h)((()=>{const e=(0,m.WB)();return e}));var f=l(8339);function g(e,o,l,t,i,a){const s=(0,n.up)("q-icon"),d=(0,n.up)("q-input"),r=(0,n.up)("q-btn"),c=(0,n.up)("q-td"),u=(0,n.up)("q-chip"),p=(0,n.up)("q-table"),m=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{rows:i.pagos,columns:i.columns,dense:"","rows-per-page-options":[0],filter:i.filter},{"top-right":(0,n.w5)((()=>[(0,n.Wm)(d,{outlined:"",dense:"",debounce:"300",modelValue:i.filter,"onUpdate:modelValue":o[0]||(o[0]=e=>i.filter=e),placeholder:"Buscar"},{append:(0,n.w5)((()=>[(0,n.Wm)(s,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-opcion":(0,n.w5)((e=>[(0,n.Wm)(c,{props:e,"auto-width":""},{default:(0,n.w5)((()=>[""==e.row.anulado||null==e.row.anulado?((0,n.wg)(),(0,n.j4)(r,{key:0,icon:"delete_outline",dense:"",size:"10px",color:"red",onClick:o=>a.anularPago(e.row)},null,8,["onClick"])):(0,n.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-multa":(0,n.w5)((e=>[(0,n.Wm)(c,{props:e,"auto-width":""},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{"text-color":"white",dense:"",color:0==e.row.multa?"green":"red",label:0==e.row.multa?"No":"Si"},null,8,["color","label"])])),_:2},1032,["props"])])),"body-cell-anulado":(0,n.w5)((e=>[(0,n.Wm)(c,{props:e,"auto-width":""},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{"text-color":"white",dense:"",color:0==e.row.anulado?"green":"red",label:0==e.row.anulado?"No":"Si"},null,8,["color","label"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])])),_:1})}l(6890);var b=l(2995),v=l(3285),w=l(3819);const x={name:"Impresion",data(){return{pagos:[],filter:"",store:(0,v.c)(),socket:(0,w.io)("https://sbio.tuprogam.com/"),columns:[{name:"opcion",label:"Opciones",field:"opcion"},{name:"id",label:"id",field:"id"},{name:"monto",label:"Monto",field:e=>e.monto+" Bs"},{name:"multa",label:"Multa",field:"multa"},{name:"fecha",label:"Fecha",field:"fecha"},{name:"hora",label:"Hora",field:"hora"},{name:"grupo",label:"Grupo",field:e=>e.grupo.tipo},{name:"afiliado",label:"Afiliado",field:e=>e.afiliado.nombres+" "+e.afiliado.apellidos},{name:"vehiculo",label:"Vehiculo",field:e=>e.vehiculo.placa},{name:"anulado",label:"Anulado",field:"anulado"},{name:"motivo",label:"Motivo",field:"motivo"}]}},mounted(){0==this.store.socket&&(this.store.socket=!0,this.socket.on("chat message",(e=>{if(console.log(e),this.pagoGet(),"asistencia"==e.type){let o=e.data;const l=new b.ZP;o.impreso=1;o.multa;let t="<style>        .titulo1{font-size:10px; text-align: center;}        .titulo2{font-size:14px; text-align: center; font-weight: bold;}        .titulo3{font-size:10px; text-align: center;}        .titulo5{font-size:8px; text-align: center;}        .titulo4{font-size:12px; text-align: center; font-weight: bold;}        .texto1{font-size:10px; text-align: center; font-weight: normal;}        .texto2{font-size:14px; text-align: center; font-weight: normal;}        .texto3{font-size:8px; text-align: center; font-weight: normal;}        table{width:100%}        img{width:70px;height:70px;}        </style>          <div id='print'>          <table>          <tr><td style='width:20%'><img src='images/logo.png'></td>          <td class='titulo1'  style='width:50%'>SINDICATO MIXTO DE TRANSPORTE<br><span class='titulo2'>26 DE JULIO</span><br><span class='titulo3' FUNDADO EL 26 DE JULIO DE 1970 <br> RESOLUCION SUPREMA 27465</span><br><br><span class='titulo2'> ASISTENCIA</span></td>          <td class='titulo1'> FECHA<br>"+o.fecha+" "+o.hora+"<br><span class='titulo5'> N° Movil "+o.afiliado.codigo+" </span><br><span   >No "+o.id+"</span></td></tr>          </table>          <div class='col-12 titulo4'>AFILIADO</div><div class='col-12 texto2'>"+o.afiliado.nombres+" "+o.afiliado.apellidos+"</div>          <div class='titulo4'>Muchas gracias por su Asistencia</div>          </div><br><br>          <table><tr>          <td class='texto3'>Secretario de Hacienda<br>VoBo</td><td class='texto3'>Agente de Control</td>          </tr></table>          </div>";document.getElementById("print").innerHTML=t,l.print(document.getElementById("print"))}else if("bloqueado"==e.type)this.$q.notify({color:"negative",textColor:"white",icon:"report_problem",message:e.data,position:"top"});else{this.pagos.unshift(e[0]);let o=e[0];const l=new b.ZP;o.impreso=1;let t=o.multa>0?"TIENE MULTA POR RETRASO":"",i="<style>        .titulo1{font-size:10px; text-align: center;}        .titulo2{font-size:14px; text-align: center; font-weight: bold;}        .titulo3{font-size:10px; text-align: center;}        .titulo5{font-size:15px; text-align: center;}        .titulo4{font-size:12px; text-align: center; font-weight: bold;}        .texto4{font-size:20px; text-align: center; font-weight: normal;}        .texto5{font-size:28px; text-align: center; font-weight: normal;}        .texto1{font-size:10px; text-align: center; font-weight: normal;}        .texto2{font-size:14px; text-align: center; font-weight: normal;}        .texto3{font-size:8px; text-align: center; font-weight: normal;}        table{width:100%}        img{width:70px;height:70px;}        </style>          <div id='print'>          <table><tr><td class='texto5'>N° Movil "+o.vehiculo.codmovil+"</td><td class='texto4'>"+o.grupo.tipo+"</td></tr><table/>          <table>          <tr><td style='width:20%'><img src='images/logo.png'></td>          <td class='titulo1'  style='width:50%'>SINDICATO MIXTO DE TRANSPORTE<br><span class='titulo2'>26 DE JULIO</span><br><span class='titulo3' FUNDADO EL 26 DE JULIO DE 1970 <br> RESOLUCION SUPREMA 27465</span><br><br><span class='titulo2'> HOJA DE APORTES</span></td>          <td class='titulo1'> FECHA<br>"+o.fecha+" "+o.hora+"<br><span class='titulo5'> N° Movil "+o.vehiculo.codmovil+" </span><br><span   >No "+o.id+"</span></td></tr>          </table>          <table><tr>          <td class='col-4 titulo4'>GRUPO<br><span class='texto1'>"+o.grupo.tipo+"</span></td><td class='col-4 titulo4'>PLACA<br><span class='texto5'>"+o.vehiculo.placa+"</span></td><td class='col-4 titulo4'>TOTAL Bs<br><span class='texto1'>"+parseFloat(o.monto).toFixed(2)+"</span></td>          </tr></table>          <div class='col-12 titulo4'>AFILIADO</div><div class='col-12 texto2'>"+o.afiliado.nombres+" "+o.afiliado.apellidos+"</div>          <div class='titulo4'>OBSERVACION: <span class='texto1'>"+t+"</span></div>          </div><br><br>          <table><tr>          <td class='texto3'>Secretario de Hacienda<br>VoBo</td><td class='texto3'>Agente de Control</td>          </tr></table>          </div>";document.getElementById("print").innerHTML=i,l.print(document.getElementById("print"))}})))},created(){this.pagoGet()},methods:{pagoGet(){this.$api.get("pago").then((e=>{this.pagos=e.data}))},anularPago(e){this.$q.dialog({title:"ANULAR PAGO",message:"Cual es el motivo ?",prompt:{model:"pago anulado",type:"text"},cancel:!0,persistent:!1}).onOk((o=>{if(""==o)return this.$q.notify({message:"Debe ingresar un motivo",color:"negative",position:"top",timeout:2e3}),!1;this.$api.post("anularPago",{pago:e.id,motivo:o}).then((e=>{this.$q.notify({message:"Pago anulado",color:"positive",position:"top",timeout:2e3}),this.pagoGet()}))})).onCancel((()=>{})).onDismiss((()=>{}))}}};var _=l(9885),A=l(7580),V=l(6611),O=l(2857),C=l(7220),y=l(4455),E=l(7691),q=l(9984),I=l.n(q);const W=(0,r.Z)(x,[["render",g]]),D=W;I()(x,"components",{QPage:_.Z,QTable:A.Z,QInput:V.Z,QIcon:O.Z,QTd:C.Z,QBtn:y.Z,QChip:E.Z});const k={class:"col-12"},P=(0,n._)("div",{class:"text-h5 text-center"},"LISTA DE AFILIADOS",-1),U=(0,n._)("div",{class:"text-h6"},"REGISTRO DE AFILIADO",-1),S={class:"row"},L={class:"col-6"},R={class:"col-6"},j={class:"col-6"},M={class:"col-6"},T={class:"col-6"},N={class:"col-6"},z={class:"col-6"},Z=(0,n._)("div",{class:"text-h6"},"MODIFICAR DE AFILIADO",-1),$={class:"row"},F={class:"col-6"},Q={class:"col-6"},B={class:"col-6"},G={class:"col-6"},Y={class:"col-6"},H={class:"col-6"},J={class:"col-6"},X=(0,n._)("div",{id:"print",class:"hidden"},null,-1);function K(e,o,l,i,a,s){const d=(0,n.up)("q-badge"),r=(0,n.up)("q-td"),c=(0,n.up)("q-tooltip"),u=(0,n.up)("q-btn"),p=(0,n.up)("q-icon"),m=(0,n.up)("q-input"),h=(0,n.up)("q-table"),f=(0,n.up)("q-card-section"),g=(0,n.up)("q-select"),b=(0,n.up)("q-card-actions"),v=(0,n.up)("q-form"),w=(0,n.up)("q-card"),x=(0,n.up)("q-dialog"),_=(0,n.up)("q-page"),A=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.j4)(_,null,{default:(0,n.w5)((()=>[(0,n._)("div",k,[P,(0,n.Wm)(h,{rows:a.afiliados,columns:a.columns,filter:a.filter,dense:"","rows-per-page-options":[0]},{"body-cell-bloqueado":(0,n.w5)((e=>[(0,n.Wm)(r,{key:"estado",props:e},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{color:"SI"==e.row.bloqueado?"green-9":"red-9",label:e.row.bloqueado},null,8,["color","label"])])),_:2},1032,["props"])])),"body-cell-estado":(0,n.w5)((e=>[(0,n.Wm)(r,{key:"estado",props:e},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{color:"ACTIVO"==e.row.estado?"green":"red",label:e.row.estado},null,8,["color","label"])])),_:2},1032,["props"])])),"body-cell-opcion":(0,n.w5)((e=>[(0,n.Wm)(r,{key:"opcion",props:e},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{dense:"",icon:"toggle_on",color:"SI"==e.row.bloqueado?"green-9":"red-9",onClick:o=>s.cambioBloqueado(e.row)},{default:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Bloquear/Desbloquear")])),_:1})])),_:2},1032,["color","onClick"]),(0,n.Wm)(u,{dense:"",icon:"toggle_on",color:"ACTIVO"==e.row.estado?"green":"red",onClick:o=>s.cambioEstado(e.row)},{default:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Uk)("PASI/ACTIVO")])),_:1})])),_:2},1032,["color","onClick"]),(0,n.Wm)(u,{dense:"",icon:"edit",color:"yellow",onClick:o=>{a.afiliado2=e.row,a.dialogModificar=!0}},{default:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Modificar")])),_:1})])),_:2},1032,["onClick"]),(0,n.Wm)(u,{dense:"",icon:"delete",color:"red",onClick:o=>s.EliminarAfiliado(e.row)},{default:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Eliminar")])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),"top-right":(0,n.w5)((()=>[(0,n.Wm)(u,{label:"REGISTRAR",color:"green",icon:"person_add",onClick:s.listreg,loading:a.loading},null,8,["onClick","loading"]),(0,n.Wm)(u,{color:"green",label:"PDF",icon:"download",onClick:s.imprimirLista},null,8,["onClick"]),(0,n.Wm)(u,{color:"red",label:"PDF",icon:"download",onClick:s.imprimirLista2},null,8,["onClick"]),(0,n.Wm)(m,{borderless:"",dense:"",debounce:"300",modelValue:a.filter,"onUpdate:modelValue":o[0]||(o[0]=e=>a.filter=e),placeholder:"Buscar"},{append:(0,n.w5)((()=>[(0,n.Wm)(p,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["rows","columns","filter"]),(0,n.Wm)(x,{modelValue:a.dialogRegistro,"onUpdate:modelValue":o[8]||(o[8]=e=>a.dialogRegistro=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{style:{"min-width":"350px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[U])),_:1}),(0,n.Wm)(v,{onSubmit:(0,t.iM)(s.onSubmit,["prevent"]),class:"q-gutter-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{class:"q-pt-none"},{default:(0,n.w5)((()=>[(0,n._)("div",S,[(0,n._)("div",L,[(0,n.Wm)(m,{modelValue:a.afiliado.ci,"onUpdate:modelValue":o[1]||(o[1]=e=>a.afiliado.ci=e),label:"CI",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",R,[(0,n.Wm)(g,{modelValue:a.afiliado.expedido,"onUpdate:modelValue":o[2]||(o[2]=e=>a.afiliado.expedido=e),options:a.exped,label:"Expedido",dense:"",outlined:""},null,8,["modelValue","options"])]),(0,n._)("div",j,[(0,n.Wm)(m,{modelValue:a.afiliado.nombres,"onUpdate:modelValue":o[3]||(o[3]=e=>a.afiliado.nombres=e),label:"Nombres",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",M,[(0,n.Wm)(m,{modelValue:a.afiliado.apellidos,"onUpdate:modelValue":o[4]||(o[4]=e=>a.afiliado.apellidos=e),label:"Apellidos",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",T,[(0,n.Wm)(m,{modelValue:a.afiliado.codigo,"onUpdate:modelValue":o[5]||(o[5]=e=>a.afiliado.codigo=e),label:"Num Movil",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",N,[(0,n.Wm)(m,{modelValue:a.afiliado.telefono,"onUpdate:modelValue":o[6]||(o[6]=e=>a.afiliado.telefono=e),label:"Telefono",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",z,[(0,n.Wm)(m,{modelValue:a.afiliado.fechaing,"onUpdate:modelValue":o[7]||(o[7]=e=>a.afiliado.fechaing=e),label:"Fecha Ing",type:"date",outlined:"",dense:"",required:""},null,8,["modelValue"])])])])),_:1}),(0,n.Wm)(b,{align:"right",class:"text-primary"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n.Wm)(u,{flat:"",color:"red",label:"Cancel",icon:"cancel"},null,512),[[A]]),(0,n.Wm)(u,{flat:"",color:"green",label:"Registrar",icon:"send",type:"submit",loading:a.loading},null,8,["loading"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(x,{modelValue:a.dialogModificar,"onUpdate:modelValue":o[16]||(o[16]=e=>a.dialogModificar=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{style:{"min-width":"350px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[Z])),_:1}),(0,n.Wm)(v,{onSubmit:(0,t.iM)(s.updateAfiliado,["prevent"]),class:"q-gutter-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{class:"q-pt-none"},{default:(0,n.w5)((()=>[(0,n._)("div",$,[(0,n._)("div",F,[(0,n.Wm)(m,{modelValue:a.afiliado2.ci,"onUpdate:modelValue":o[9]||(o[9]=e=>a.afiliado2.ci=e),label:"CI",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",Q,[(0,n.Wm)(g,{modelValue:a.afiliado2.expedido,"onUpdate:modelValue":o[10]||(o[10]=e=>a.afiliado2.expedido=e),options:a.exped,label:"Expedido",dense:"",outlined:""},null,8,["modelValue","options"])]),(0,n._)("div",B,[(0,n.Wm)(m,{modelValue:a.afiliado2.nombres,"onUpdate:modelValue":o[11]||(o[11]=e=>a.afiliado2.nombres=e),label:"Nombres",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",G,[(0,n.Wm)(m,{modelValue:a.afiliado2.apellidos,"onUpdate:modelValue":o[12]||(o[12]=e=>a.afiliado2.apellidos=e),label:"Apellidos",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",Y,[(0,n.Wm)(m,{modelValue:a.afiliado2.codigo,"onUpdate:modelValue":o[13]||(o[13]=e=>a.afiliado2.codigo=e),label:"Num Movil",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",H,[(0,n.Wm)(m,{modelValue:a.afiliado2.telefono,"onUpdate:modelValue":o[14]||(o[14]=e=>a.afiliado2.telefono=e),label:"Telefono",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",J,[(0,n.Wm)(m,{modelValue:a.afiliado2.fechaing,"onUpdate:modelValue":o[15]||(o[15]=e=>a.afiliado2.fechaing=e),label:"Fecha Ing",type:"date",outlined:"",dense:"",required:""},null,8,["modelValue"])])])])),_:1}),(0,n.Wm)(b,{align:"right",class:"text-primary"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n.Wm)(u,{flat:"",color:"red",label:"Cancel",icon:"cancel"},null,512),[[A]]),(0,n.Wm)(u,{flat:"",color:"green",label:"Modificar",icon:"pencil",type:"submit",loading:a.loading},null,8,["loading"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])]),X])),_:1})}var ee=l(4376);const oe={name:"Afiliados.vue",data(){return{loading:!1,dialogRegistro:!1,dialogModificar:!1,afiliado:{fechaing:ee.ZP.formatDate(Date.now(),"YYYY-MM-DD")},afiliado2:{},afiliados:[],filter:"",exped:["OR","LP","PT","PD","BE","CB","CH","TJ","SC","EX"],columns:[{name:"opcion",label:"OPCION"},{name:"ci",label:"CI",field:"ci"},{name:"expedido",label:"EXPEDIDO",field:"expedido"},{name:"bloqueado",label:"BLOQUEADO",field:"bloqueado"},{name:"estado",label:"ESTADO",field:"estado"},{name:"codigo",label:"NUM MOVIL",field:"codigo"},{name:"telfono",label:"TELEFONO",field:"telefono"},{name:"nombres",label:"NOMBRES",field:"nombres"},{name:"apellidos",label:"APELLIDOS",field:"apellidos"},{name:"fechaing",label:"FECHA ING",field:"fechaing"}]}},created(){this.listadoAfiliado()},methods:{imprimirLista(){const e=new b.ZP;let o="<style>        .titulo1{font-size:10px; text-align: center;}        .titulo2{font-size:14px; text-align: center; font-weight: bold;}        .titulo3{font-size:10px; text-align: center;}        .titulo5{font-size:15px; text-align: center;}        .titulo4{font-size:12px; text-align: center; font-weight: bold;}        .texto4{font-size:20px; text-align: center; font-weight: normal;}        .texto5{font-size:28px; text-align: center; font-weight: normal;}        .texto1{font-size:10px; text-align: center; font-weight: normal;}        .texto2{font-size:14px; text-align: center; font-weight: normal;}        .texto3{font-size:8px; text-align: center; font-weight: normal;}        table{width:100%}        table, th, td {        border: 1px solid;        border-collapse: collapse;        }        img{width:70px;height:70px;}        </style>          <div id='print'>          <div class='titulo2'>AFILIADOS ACTIVOS </div><br>          <table>           <tr><th>CI</th><th>EXPEDIDO</th><th>NOMBRES</th><th>APELLIDOS</th><th>TELEFONO</th></tr>";this.afiliados.forEach((e=>{"ACTIVO"==e.estado&&(o+="<tr><td>"+e.ci+"</td><td>"+e.expedido+"</td><td>"+e.nombres+"</td><td>"+e.apellidos+"</td><td>"+e.telefono+"</td></tr>")})),o+="</table></div>",document.getElementById("print").innerHTML=o,e.print(document.getElementById("print"))},imprimirLista2(){const e=new b.ZP;let o="<style>        .titulo1{font-size:10px; text-align: center;}        .titulo2{font-size:14px; text-align: center; font-weight: bold;}        .titulo3{font-size:10px; text-align: center;}        .titulo5{font-size:15px; text-align: center;}        .titulo4{font-size:12px; text-align: center; font-weight: bold;}        .texto4{font-size:20px; text-align: center; font-weight: normal;}        .texto5{font-size:28px; text-align: center; font-weight: normal;}        .texto1{font-size:10px; text-align: center; font-weight: normal;}        .texto2{font-size:14px; text-align: center; font-weight: normal;}        .texto3{font-size:8px; text-align: center; font-weight: normal;}        table{width:100%}        table, th, td {        border: 1px solid;        border-collapse: collapse;        }        img{width:70px;height:70px;}        </style>          <div id='print'>          <div class='titulo2'>AFILIADOS PASIVOS </div><br>          <table>           <tr><th>CI</th><th>EXPEDIDO</th><th>NOMBRES</th><th>APELLIDOS</th><th>TELEFONO</th></tr>";this.afiliados.forEach((e=>{"PASIVO"==e.estado&&(o+="<tr><td>"+e.ci+"</td><td>"+e.expedido+"</td><td>"+e.nombres+"</td><td>"+e.apellidos+"</td><td>"+e.telefono+"</td></tr>")})),o+="</table></div>",document.getElementById("print").innerHTML=o,e.print(document.getElementById("print"))},cambioBloqueado(e){this.$q.dialog({title:"Cambio de estado",message:"Esta seguro de cambiar el estado del afiliado?",cancel:!0,prompt:{model:"Bloqueado",type:"text"},persistent:!0}).onOk((o=>{e.bloqueado=o,this.$api.post("cambioBloqueado/"+e.id,e).then((e=>{this.listadoAfiliado()}))}))},cambioEstado(e){e.estado="ACTIVO"==e.estado?"PASIVO":"ACTIVO",this.$api.post("cambioEstado/"+e.id).then((e=>{this.listadoAfiliado()}))},listreg(){this.afiliado={fechaing:ee.ZP.formatDate(Date.now(),"YYYY-MM-DD")},this.afiliado.expedido=this.exped[0],this.dialogRegistro=!0},listadoAfiliado(){this.$api.get("afiliado").then((e=>{this.afiliados=e.data}))},onSubmit(){this.loading=!0,this.listadoAfiliado(),this.afiliados.forEach((e=>{if(e.ci==this.afiliado.ci)return this.$q.notify({message:"El carnet se encuentra registrado",icon:"info",color:"red"}),this.loading=!1,!1})),this.$api.post("afiliado",this.afiliado).then((e=>{this.$q.notify({message:"Afiliado Registrado",icon:"done",color:"green"}),this.dialogRegistro=!1,this.listadoAfiliado(),this.loading=!1}))},updateAfiliado(){this.loading=!0,this.$api.put("afiliado/"+this.afiliado2.id,this.afiliado2).then((e=>{this.$q.notify({message:"Afiliado Modificado",icon:"done",color:"green"}),this.dialogModificar=!1,this.listadoAfiliado(),this.loading=!1}))},EliminarAfiliado(e){this.$q.dialog({title:"Eliminar Afiliado",message:"Esta seguro de eliminar?",cancel:!0,persistent:!1}).onOk((()=>{this.$api.delete("afiliado/"+e.id).then((e=>{this.$q.notify({message:"Afiliado Eliminado",icon:"done",color:"red"}),this.listadoAfiliado()}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}}};var le=l(990),te=l(6858),ie=l(2074),ae=l(4458),ne=l(3190),se=l(8326),de=l(4648),re=l(1821),ce=l(2146);const ue=(0,r.Z)(oe,[["render",K]]),pe=ue;I()(oe,"components",{QPage:_.Z,QTable:A.Z,QTd:C.Z,QBadge:le.Z,QBtn:y.Z,QTooltip:te.Z,QInput:V.Z,QIcon:O.Z,QDialog:ie.Z,QCard:ae.Z,QCardSection:ne.Z,QForm:se.Z,QSelect:de.Z,QCardActions:re.Z}),I()(oe,"directives",{ClosePopup:ce.Z});const me={class:"col-12"},he=(0,n._)("div",{class:"text-h5 text-center"},"LISTA DE VEHICULOS",-1),fe={class:"row"},ge={class:"col-4"},be={class:"col-4"},ve={class:"col-4"},we={class:"row"},xe={class:"col-4"},_e={class:"col-4"},Ae={class:"col-4"},Ve=(0,n._)("div",{class:"text-h6"},"REGISTRO DE VEHICULO",-1),Oe={class:"row"},Ce={class:"col-6"},ye={class:"col-6"},Ee={class:"col-6"},qe={class:"col-6"},Ie={class:"col-6"},We={class:"col-6"},De={class:"col-6"},ke={class:"col-6"},Pe={class:"col-6"},Ue={class:"col-6"},Se={class:"col-6"},Le=(0,n._)("div",{class:"text-h6"},"MODIFICAR DE AFILIADO",-1),Re={class:"row"},je={class:"col-6"},Me={class:"col-6"},Te={class:"col-6"},Ne={class:"col-6"},ze={class:"col-6"},Ze={class:"col-6"},$e={class:"col-6"},Fe={class:"col-6"},Qe={class:"col-6"},Be={class:"col-6"},Ge={class:"col-6"},Ye=(0,n._)("div",{id:"print",class:"hidden"},null,-1);function He(e,o,l,i,a,s){const d=(0,n.up)("q-select"),r=(0,n.up)("q-btn"),c=(0,n.up)("q-td"),u=(0,n.up)("q-icon"),p=(0,n.up)("q-input"),m=(0,n.up)("q-table"),h=(0,n.up)("q-card-section"),f=(0,n.up)("q-card-actions"),g=(0,n.up)("q-form"),b=(0,n.up)("q-card"),v=(0,n.up)("q-dialog"),w=(0,n.up)("q-page"),x=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.j4)(w,null,{default:(0,n.w5)((()=>[(0,n._)("div",me,[he,(0,n._)("div",fe,[(0,n._)("div",ge,[(0,n.Wm)(d,{modelValue:a.datocolor,"onUpdate:modelValue":o[0]||(o[0]=e=>a.datocolor=e),options:a.colores,label:"CodMovil",outlined:"",dense:""},null,8,["modelValue","options"])]),(0,n._)("div",be,[(0,n.Wm)(r,{color:"green",icon:"print",label:"EXCEL",onClick:s.ExportExcel},null,8,["onClick"])]),(0,n._)("div",ve,[(0,n.Wm)(r,{color:"red",icon:"print",label:"PDF",onClick:s.ExportPDF},null,8,["onClick"])])]),(0,n._)("div",we,[(0,n._)("div",xe,[(0,n.Wm)(d,{modelValue:a.grupo,"onUpdate:modelValue":o[1]||(o[1]=e=>a.grupo=e),options:a.grupos,label:"CodMovil",outlined:"",dense:""},null,8,["modelValue","options"])]),(0,n._)("div",_e,[(0,n.Wm)(r,{color:"green",icon:"print",label:"EXCEL",onClick:s.ExportExcel2},null,8,["onClick"])]),(0,n._)("div",Ae,[(0,n.Wm)(r,{color:"red",icon:"print",label:"PDF",onClick:s.ExportPDF2},null,8,["onClick"])])]),(0,n.Wm)(m,{rows:a.vehiculos,columns:a.columns,filter:a.filter},{"body-cell-opcion":(0,n.w5)((e=>[(0,n.Wm)(c,{key:"opcion",props:e},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{dense:"",icon:"edit",color:"yellow",onClick:o=>s.upVehiculo(e.row)},null,8,["onClick"]),(0,n.Wm)(r,{dense:"",icon:"delete",color:"red",onClick:o=>s.EliminarVehiculo(e.row)},null,8,["onClick"])])),_:2},1032,["props"])])),"top-right":(0,n.w5)((()=>[(0,n.Wm)(r,{label:"REGISTRAR",color:"green",icon:"person_add",onClick:s.listreg,loading:a.loading},null,8,["onClick","loading"]),(0,n.Wm)(p,{borderless:"",dense:"",debounce:"300",modelValue:a.filter,"onUpdate:modelValue":o[2]||(o[2]=e=>a.filter=e),placeholder:"Buscar"},{append:(0,n.w5)((()=>[(0,n.Wm)(u,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["rows","columns","filter"]),(0,n.Wm)(v,{modelValue:a.dialogRegistro,"onUpdate:modelValue":o[14]||(o[14]=e=>a.dialogRegistro=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{style:{"min-width":"350px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[Ve])),_:1}),(0,n.Wm)(g,{onSubmit:(0,t.iM)(s.onSubmit,["prevent"]),class:"q-gutter-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{class:"q-pt-none"},{default:(0,n.w5)((()=>[(0,n._)("div",Oe,[(0,n._)("div",Ce,[(0,n.Wm)(p,{modelValue:a.vehiculo.placa,"onUpdate:modelValue":o[3]||(o[3]=e=>a.vehiculo.placa=e),label:"PLACA",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",ye,[(0,n.Wm)(p,{modelValue:a.vehiculo.codmovil,"onUpdate:modelValue":o[4]||(o[4]=e=>a.vehiculo.codmovil=e),label:"COD MOVIL",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",Ee,[(0,n.Wm)(d,{modelValue:a.vehiculo.tipo,"onUpdate:modelValue":o[5]||(o[5]=e=>a.vehiculo.tipo=e),label:"TIPO",options:a.tipovehiculo,dense:"",outlined:""},null,8,["modelValue","options"])]),(0,n._)("div",qe,[(0,n.Wm)(p,{modelValue:a.vehiculo.modelo,"onUpdate:modelValue":o[6]||(o[6]=e=>a.vehiculo.modelo=e),label:"MODELO",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",Ie,[(0,n.Wm)(d,{modelValue:a.vehiculo.marca,"onUpdate:modelValue":o[7]||(o[7]=e=>a.vehiculo.marca=e),label:"MARCA",options:a.marca,outlined:"",dense:"",required:""},null,8,["modelValue","options"])]),(0,n._)("div",We,[(0,n.Wm)(p,{modelValue:a.vehiculo.radicatoria,"onUpdate:modelValue":o[8]||(o[8]=e=>a.vehiculo.radicatoria=e),label:"RADICATORIA",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",De,[(0,n.Wm)(p,{modelValue:a.vehiculo.color,"onUpdate:modelValue":o[9]||(o[9]=e=>a.vehiculo.color=e),label:"COLOR",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",ke,[(0,n.Wm)(d,{modelValue:a.vehiculo.codcolor,"onUpdate:modelValue":o[10]||(o[10]=e=>a.vehiculo.codcolor=e),label:"COD COLOR",options:a.colores,outlined:"",dense:"",required:""},null,8,["modelValue","options"])]),(0,n._)("div",Pe,[(0,n.Wm)(p,{modelValue:a.vehiculo.capacidad,"onUpdate:modelValue":o[11]||(o[11]=e=>a.vehiculo.capacidad=e),label:"CAPACIDAD",type:"number",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",Ue,[(0,n.Wm)(d,{modelValue:a.vehiculo.afiliado,"onUpdate:modelValue":o[12]||(o[12]=e=>a.vehiculo.afiliado=e),options:a.afiliados,label:"Afiliado",dense:"",outlined:"",onFilter:s.filterFn,"use-input":"","input-debounce":"0"},null,8,["modelValue","options","onFilter"])]),(0,n._)("div",Se,[(0,n.Wm)(d,{modelValue:a.vehiculo.grupo,"onUpdate:modelValue":o[13]||(o[13]=e=>a.vehiculo.grupo=e),options:a.grupos,label:"Grupo",dense:"",outlined:""},null,8,["modelValue","options"])])])])),_:1}),(0,n.Wm)(f,{align:"right",class:"text-primary"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n.Wm)(r,{flat:"",color:"red",label:"Cancel",icon:"cancel"},null,512),[[x]]),(0,n.Wm)(r,{flat:"",color:"green",label:"Registrar",icon:"send",type:"submit",loading:a.loading},null,8,["loading"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(v,{modelValue:a.dialogModificar,"onUpdate:modelValue":o[26]||(o[26]=e=>a.dialogModificar=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{style:{"min-width":"350px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[Le])),_:1}),(0,n.Wm)(g,{onSubmit:(0,t.iM)(s.updateVehiculo,["prevent"]),class:"q-gutter-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{class:"q-pt-none"},{default:(0,n.w5)((()=>[(0,n._)("div",Re,[(0,n._)("div",je,[(0,n.Wm)(p,{modelValue:a.vehiculo2.placa,"onUpdate:modelValue":o[15]||(o[15]=e=>a.vehiculo2.placa=e),label:"PLACA",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",Me,[(0,n.Wm)(p,{modelValue:a.vehiculo2.codmovil,"onUpdate:modelValue":o[16]||(o[16]=e=>a.vehiculo2.codmovil=e),label:"COD MOVIL",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",Te,[(0,n.Wm)(d,{modelValue:a.vehiculo2.tipo,"onUpdate:modelValue":o[17]||(o[17]=e=>a.vehiculo2.tipo=e),options:a.tipovehiculo,label:"TIPO",dense:"",outlined:""},null,8,["modelValue","options"])]),(0,n._)("div",Ne,[(0,n.Wm)(p,{modelValue:a.vehiculo2.modelo,"onUpdate:modelValue":o[18]||(o[18]=e=>a.vehiculo2.modelo=e),label:"MODELO",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",ze,[(0,n.Wm)(d,{modelValue:a.vehiculo2.marca,"onUpdate:modelValue":o[19]||(o[19]=e=>a.vehiculo2.marca=e),label:"MARCA",options:a.marca,outlined:"",dense:"",required:""},null,8,["modelValue","options"])]),(0,n._)("div",Ze,[(0,n.Wm)(p,{modelValue:a.vehiculo2.color,"onUpdate:modelValue":o[20]||(o[20]=e=>a.vehiculo2.color=e),label:"COLOR",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",$e,[(0,n.Wm)(p,{modelValue:a.vehiculo2.radicatoria,"onUpdate:modelValue":o[21]||(o[21]=e=>a.vehiculo2.radicatoria=e),label:"RADICATORIA",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",Fe,[(0,n.Wm)(d,{modelValue:a.vehiculo2.codcolor,"onUpdate:modelValue":o[22]||(o[22]=e=>a.vehiculo2.codcolor=e),label:"COD COLOR",options:a.colores,outlined:"",dense:"",required:""},null,8,["modelValue","options"])]),(0,n._)("div",Qe,[(0,n.Wm)(p,{modelValue:a.vehiculo2.capacidad,"onUpdate:modelValue":o[23]||(o[23]=e=>a.vehiculo2.capacidad=e),label:"CAPACIDAD",type:"number",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",Be,[(0,n.Wm)(d,{modelValue:a.vehiculo2.afiliado,"onUpdate:modelValue":o[24]||(o[24]=e=>a.vehiculo2.afiliado=e),options:a.afiliados,label:"Afiliado",dense:"",outlined:"",onFilter:s.filterFn,"use-input":"","input-debounce":"0"},null,8,["modelValue","options","onFilter"])]),(0,n._)("div",Ge,[(0,n.Wm)(d,{modelValue:a.vehiculo2.grupo,"onUpdate:modelValue":o[25]||(o[25]=e=>a.vehiculo2.grupo=e),options:a.grupos,label:"Grupo",dense:"",outlined:""},null,8,["modelValue","options"])])])])),_:1}),(0,n.Wm)(f,{align:"right",class:"text-primary"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n.Wm)(r,{flat:"",color:"red",label:"Cancel",icon:"cancel"},null,512),[[x]]),(0,n.Wm)(r,{flat:"",color:"green",label:"Modificar",icon:"pencil",type:"submit",loading:a.loading},null,8,["loading"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),Ye])])),_:1})}l(9665);var Je=l(4410),Xe=l.n(Je);const Ke={name:"Vehiculos.vue",data(){return{loading:!1,dialogRegistro:!1,dialogModificar:!1,tipovehiculo:["MINIBUS","VAGONETA","FURGON","FURGONETA"],marca:["HYUNDAI","MERCEDEZ BENZ","KING LONG","FOTON","TOYOTA","MITSUBISHI","JAC","JOYLONG","HIGER","MAZDA","NISSAN"],colores:["NINGUNO","BLANCO","CELESTE","ROJO","AZUL"],vehiculo:{},vehiculo2:{},vehiculos:[],afiliados:[],filterAf:[],grupos:[],grupo:{label:""},datoprint:[],datocolor:"NINGUNO",printgrupo:[],printgrupo2:[],filter:"",columns:[{name:"opcion",label:"OPCION"},{name:"placa",label:"PLACA",field:"placa"},{name:"codmovil",label:"COD MOVIL",field:"codmovil"},{name:"codcolor",label:"COD COLOR",field:"codcolor"},{name:"tipo",label:"TIPO",field:"tipo"},{name:"modelo",label:"MODELO",field:"modelo"},{name:"marca",label:"MARCA",field:"marca"},{name:"radicatoria",label:"RADICATORIA",field:"radicatoria"},{name:"color",label:"COLOR",field:"color"},{name:"capacidad",label:"CAPACIDAD",field:"capacidad"},{name:"afiliado",label:"AFILIADO",field:e=>e.afiliado.nombres+" "+e.afiliado.apellidos},{name:"grupo",label:"GRUPO",field:e=>e.grupo.tipo}]}},created(){this.listadoAfiliado(),this.listadoGrupos(),this.listadoVehiculos()},methods:{ExportExcel(){if("NINGUNO"==this.datocolor||""==this.datocolor&&void 0==this.datocolor)return!1;this.datoprint=[],this.datoprint2=[];let e=0,o=0;this.vehiculos.forEach((l=>{l.codcolor==this.datocolor&&"NINGUNO"!=this.datocolor&&("ACTIVO"==l.afiliado.estado?(e++,l.numero=e,this.datoprint.push(l)):(o++,l.numero=o,this.datoprint2.push(l)))}));let l=[{sheet:"Lista ACTIVO "+this.datocolor,columns:[{label:"NUM",value:"numero"},{label:"COD MOVIL",value:"codmovil"},{label:"AFILIADO",value:e=>e.afiliado.nombres+" "+e.afiliado.apellidos},{label:"TELEFONO",value:e=>e.afiliado.telefono},{label:"PLACA",value:"placa"}],content:this.datoprint},{sheet:"Lista PASIVO "+this.datocolor,columns:[{label:"NUM",value:"numero"},{label:"COD MOVIL",value:"codmovil"},{label:"AFILIADO",value:e=>e.afiliado.nombres+" "+e.afiliado.apellidos},{label:"TELEFONO",value:e=>e.afiliado.telefono},{label:"PLACA",value:"placa"}],content:this.datoprint2}],t={fileName:"Listado",extraLength:7,writeOptions:{}};Xe()(l,t)},ExportExcel2(){if(""==this.grupo.id&&void 0==this.grupo.id)return!1;this.printgrupo=[],this.printgrupo2=[];let e=0,o=0;this.vehiculos.forEach((l=>{l.grupo.tipo==this.grupo.tipo&&("ACTIVO"==l.afiliado.estado?(e++,l.numero=e,this.printgrupo.push(l)):(o++,l.numero=o,this.printgrupo2.push(l)))})),console.log(this.printgrupo);let l=[{sheet:"Lista Activo"+this.grupo.tipo,columns:[{label:"NUM",value:"numero"},{label:"COD MOVIL",value:"codmovil"},{label:"AFILIADO",value:e=>e.afiliado.nombres+" "+e.afiliado.apellidos},{label:"TELEFONO",value:e=>e.afiliado.telefono},{label:"PLACA",value:"placa"}],content:this.printgrupo},{sheet:"Lista Pasivo"+this.grupo.tipo,columns:[{label:"NUM",value:"numero"},{label:"COD MOVIL",value:"codmovil"},{label:"AFILIADO",value:e=>e.afiliado.nombres+" "+e.afiliado.apellidos},{label:"TELEFONO",value:e=>e.afiliado.telefono},{label:"PLACA",value:"placa"}],content:this.printgrupo2}],t={fileName:"ListadoGrupo",extraLength:7,writeOptions:{}};Xe()(l,t)},ExportPDF(){if("NINGUNO"==this.datocolor||""==this.datocolor&&void 0==this.datocolor)return!1;this.datoprint=[];let e=0;this.vehiculos.forEach((o=>{o.codcolor==this.datocolor&&"NINGUNO"!=this.datocolor&&(e++,o.numero=e,this.datoprint.push(o))}));const o=new b.ZP;let l="<style>        .titulo1{font-size:10px; text-align: center;}        .titulo2{font-size:14px; text-align: center; font-weight: bold;}        .titulo3{font-size:10px; text-align: center;}        .titulo5{font-size:15px; text-align: center;}        .titulo4{font-size:12px; text-align: center; font-weight: bold;}        .texto4{font-size:20px; text-align: center; font-weight: normal;}        .texto5{font-size:28px; text-align: center; font-weight: normal;}        .texto1{font-size:10px; text-align: center; font-weight: normal;}        .texto2{font-size:14px; text-align: center; font-weight: normal;}        .texto3{font-size:8px; text-align: center; font-weight: normal;}        table{width:100%;border-collapse: collapse;}        table, th, td { border: 1px solid;}        img{width:70px;height:70px;}        </style>          <div id='print'>          <div class='titulo2'>GRUPO "+this.datocolor+"</div><br>          <table><tr><th>Num</th><th>Cod Vehiculo</th><th>Nombre Completo</th><th>Telefono</th><th>Placa</th></tr>";this.datoprint.forEach((e=>{l+="<tr><td>"+e.numero+"</td><td>"+e.codmovil+"</td><td>"+e.afiliado.nombres+" "+e.afiliado.apellidos+"</td><td>"+e.afiliado.telefono+"</td><td>"+e.placa+"</td></tr>"})),l+="</table>          </div>",document.getElementById("print").innerHTML=l,o.print(document.getElementById("print"))},ExportPDF2(){if(""==this.grupo.id&&void 0==this.grupo.id)return!1;this.printgrupo=[];let e=0;this.vehiculos.forEach((o=>{o.grupo.tipo==this.grupo.tipo&&(e++,o.numero=e,this.printgrupo.push(o))}));const o=new b.ZP;let l="<style>        .titulo1{font-size:10px; text-align: center;}        .titulo2{font-size:14px; text-align: center; font-weight: bold;}        .titulo3{font-size:10px; text-align: center;}        .titulo5{font-size:15px; text-align: center;}        .titulo4{font-size:12px; text-align: center; font-weight: bold;}        .texto4{font-size:20px; text-align: center; font-weight: normal;}        .texto5{font-size:28px; text-align: center; font-weight: normal;}        .texto1{font-size:10px; text-align: center; font-weight: normal;}        .texto2{font-size:14px; text-align: center; font-weight: normal;}        .texto3{font-size:8px; text-align: center; font-weight: normal;}        table{width:100%;border-collapse: collapse;}        table, th, td { border: 1px solid;}        img{width:70px;height:70px;}        </style>          <div id='print'>          <div class='titulo2'>GRUPO "+this.grupo.tipo+"</div><br>          <table><tr><th>Num</th><th>Cod Vehiculo</th><th>Nombre Completo</th><th>Telefono</th><th>Placa</th></tr>";this.printgrupo.forEach((e=>{l+="<tr><td>"+e.numero+"</td><td>"+e.codmovil+"</td><td>"+e.afiliado.nombres+" "+e.afiliado.apellidos+"</td><td>"+e.afiliado.telefono+"</td><td>"+e.placa+"</td></tr>"})),l+="</table>          </div>",document.getElementById("print").innerHTML=l,o.print(document.getElementById("print"))},filterFn(e,o){o(""!==e?()=>{const o=e.toLowerCase();this.afiliados=this.filterAf.filter((e=>e.label.toLowerCase().indexOf(o)>-1))}:()=>{this.afiliados=this.filterAf})},listreg(){this.vehiculo={},this.dialogRegistro=!0},listadoAfiliado(){this.afiliados=[],this.$api.get("afiliado").then((e=>{e.data.forEach((e=>{e.label=e.nombres+" "+e.apellidos,this.afiliados.push(e)})),this.filterAf=this.afiliados}))},listadoVehiculos(){this.$api.get("vehiculo").then((e=>{this.vehiculos=e.data}))},listadoGrupos(){this.grupos=[],this.$api.get("grupo").then((e=>{e.data.forEach((e=>{e.label=e.tipo,this.grupos.push(e)}))}))},onSubmit(){return this.vehiculo.grupo=={}?(this.$q.notify({message:"Debe Seleccionar Grupo",icon:"info",color:"red"}),!1):(this.vehiculo.grupo_id=this.vehiculo.grupo.id,this.vehiculo.afiliado=={}?(this.$q.notify({message:"Debe Seleccionar Afiliado",icon:"info",color:"red"}),!1):(this.vehiculo.afiliado_id=this.vehiculo.afiliado.id,this.loading=!0,this.listadoVehiculos(),this.vehiculos.forEach((e=>{if(e.placa==this.vehiculo.placa)return this.$q.notify({message:"La placa se encuentra registrado",icon:"info",color:"red"}),this.loading=!1,!1})),void this.$api.post("vehiculo",this.vehiculo).then((e=>{this.$q.notify({message:"Vehiculo Registrado",icon:"done",color:"green"}),this.dialogRegistro=!1,this.listadoVehiculos(),this.loading=!1}))))},upVehiculo(e){this.vehiculo2=e,this.vehiculo2.codcolor=e.codcolor,this.vehiculo2.tipo=e.tipo,this.vehiculo2.grupo.label=this.vehiculo2.grupo.tipo,this.vehiculo2.afiliado.label=this.vehiculo2.afiliado.nombres+" "+this.vehiculo2.afiliado.apellidos,this.dialogModificar=!0},updateVehiculo(){this.loading=!0,this.vehiculo2.afiliado_id=this.vehiculo2.afiliado.id,this.vehiculo2.grupo_id=this.vehiculo2.grupo.id,this.$api.put("vehiculo/"+this.vehiculo2.id,this.vehiculo2).then((e=>{this.$q.notify({message:"Vehiculo Modificado",icon:"done",color:"green"}),this.dialogModificar=!1,this.listadoAfiliado(),this.loading=!1}))},EliminarVehiculo(e){this.$q.dialog({title:"Eliminar Vehiculo",message:"Esta seguro de eliminar?",cancel:!0,persistent:!1}).onOk((()=>{this.$api.delete("vehiculo/"+e.id).then((e=>{this.$q.notify({message:"Vehiculo Eliminado",icon:"done",color:"red"}),this.listadoVehiculos()}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}}},eo=(0,r.Z)(Ke,[["render",He]]),oo=eo;I()(Ke,"components",{QPage:_.Z,QSelect:de.Z,QBtn:y.Z,QTable:A.Z,QTd:C.Z,QInput:V.Z,QIcon:O.Z,QDialog:ie.Z,QCard:ae.Z,QCardSection:ne.Z,QForm:se.Z,QCardActions:re.Z}),I()(Ke,"directives",{ClosePopup:ce.Z});const lo={class:"col-12"},to=(0,n._)("div",{class:"text-h5 text-center"},"LISTA DE GRUPOS",-1),io=(0,n._)("div",{class:"text-h6"},"REGISTRO DE GRUPO",-1),ao={class:"row"},no={class:"col-6"},so={class:"col-6"},ro={class:"col-6"},co={class:"col-6"},uo={class:"col-6"},po={class:"col-6"},mo={class:"col-6"},ho=(0,n._)("div",{class:"text-h6"},"MODIFICAR DE AFILIADO",-1),fo={class:"row"},go={class:"col-6"},bo={class:"col-6"},vo={class:"col-6"},wo={class:"col-6"},xo={class:"col-6"},_o={class:"col-6"},Ao={class:"col-6"};function Vo(e,o,l,i,a,s){const d=(0,n.up)("q-btn"),r=(0,n.up)("q-td"),c=(0,n.up)("q-icon"),u=(0,n.up)("q-input"),p=(0,n.up)("q-table"),m=(0,n.up)("q-card-section"),h=(0,n.up)("q-select"),f=(0,n.up)("q-card-actions"),g=(0,n.up)("q-form"),b=(0,n.up)("q-card"),v=(0,n.up)("q-dialog"),w=(0,n.up)("q-page"),x=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.j4)(w,null,{default:(0,n.w5)((()=>[(0,n._)("div",lo,[to,(0,n.Wm)(p,{rows:a.grupos,columns:a.columns},{"body-cell-opcion":(0,n.w5)((e=>[(0,n.Wm)(r,{key:"opcion",props:e},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{dense:"",icon:"edit",color:"yellow",onClick:o=>{a.grupo2=e.row,a.dialogModificar=!0}},null,8,["onClick"]),(0,n.Wm)(d,{dense:"",icon:"delete",color:"red",onClick:o=>s.EliminarGrupo(e.row)},null,8,["onClick"])])),_:2},1032,["props"])])),"top-right":(0,n.w5)((()=>[(0,n.Wm)(d,{label:"REGISTRAR",color:"green",icon:"person_add",onClick:s.listreg,loading:a.loading},null,8,["onClick","loading"]),(0,n.Wm)(u,{borderless:"",dense:"",debounce:"300",modelValue:a.filter,"onUpdate:modelValue":o[0]||(o[0]=e=>a.filter=e),placeholder:"Buscar"},{append:(0,n.w5)((()=>[(0,n.Wm)(c,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["rows","columns"]),(0,n.Wm)(v,{modelValue:a.dialogRegistro,"onUpdate:modelValue":o[8]||(o[8]=e=>a.dialogRegistro=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{style:{"min-width":"350px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[io])),_:1}),(0,n.Wm)(g,{onSubmit:(0,t.iM)(s.onSubmit,["prevent"]),class:"q-gutter-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{class:"q-pt-none"},{default:(0,n.w5)((()=>[(0,n._)("div",ao,[(0,n._)("div",no,[(0,n.Wm)(u,{modelValue:a.grupo.tipo,"onUpdate:modelValue":o[1]||(o[1]=e=>a.grupo.tipo=e),label:"Nombre",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",so,[(0,n.Wm)(u,{modelValue:a.grupo.detalle,"onUpdate:modelValue":o[2]||(o[2]=e=>a.grupo.detalle=e),label:"Descripcion",dense:"",outlined:"",required:""},null,8,["modelValue"])]),(0,n._)("div",ro,[(0,n.Wm)(h,{modelValue:a.grupo.rango,"onUpdate:modelValue":o[3]||(o[3]=e=>a.grupo.rango=e),label:"Rango",options:a.rangos,outlined:"",dense:"",required:""},null,8,["modelValue","options"])]),(0,n._)("div",co,[(0,n.Wm)(u,{modelValue:a.grupo.sindical,"onUpdate:modelValue":o[4]||(o[4]=e=>a.grupo.sindical=e),label:"Ap Sindical",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",uo,[(0,n.Wm)(u,{modelValue:a.grupo.seguro,"onUpdate:modelValue":o[5]||(o[5]=e=>a.grupo.seguro=e),label:"Ap ProAccident",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",po,[(0,n.Wm)(u,{modelValue:a.grupo.deportico,"onUpdate:modelValue":o[6]||(o[6]=e=>a.grupo.deportico=e),label:"Ap Deportico",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",mo,[(0,n.Wm)(u,{modelValue:a.grupo.decano,"onUpdate:modelValue":o[7]||(o[7]=e=>a.grupo.decano=e),label:"Ap Decano",outlined:"",dense:"",required:""},null,8,["modelValue"])])])])),_:1}),(0,n.Wm)(f,{align:"right",class:"text-primary"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n.Wm)(d,{flat:"",color:"red",label:"Cancel",icon:"cancel"},null,512),[[x]]),(0,n.Wm)(d,{flat:"",color:"green",label:"Registrar",icon:"send",type:"submit",loading:a.loading},null,8,["loading"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(v,{modelValue:a.dialogModificar,"onUpdate:modelValue":o[16]||(o[16]=e=>a.dialogModificar=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{style:{"min-width":"350px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[ho])),_:1}),(0,n.Wm)(g,{onSubmit:(0,t.iM)(s.updateGrupo,["prevent"]),class:"q-gutter-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{class:"q-pt-none"},{default:(0,n.w5)((()=>[(0,n._)("div",fo,[(0,n._)("div",go,[(0,n.Wm)(u,{modelValue:a.grupo2.tipo,"onUpdate:modelValue":o[9]||(o[9]=e=>a.grupo2.tipo=e),label:"Nombre",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",bo,[(0,n.Wm)(u,{modelValue:a.grupo2.detalle,"onUpdate:modelValue":o[10]||(o[10]=e=>a.grupo2.detalle=e),label:"Descripcion",dense:"",outlined:"",required:""},null,8,["modelValue"])]),(0,n._)("div",vo,[(0,n.Wm)(h,{modelValue:a.grupo2.rango,"onUpdate:modelValue":o[11]||(o[11]=e=>a.grupo2.rango=e),label:"Rango",options:a.rangos,outlined:"",dense:"",required:""},null,8,["modelValue","options"])]),(0,n._)("div",wo,[(0,n.Wm)(u,{modelValue:a.grupo2.sindical,"onUpdate:modelValue":o[12]||(o[12]=e=>a.grupo2.sindical=e),label:"Ap Sindical",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",xo,[(0,n.Wm)(u,{modelValue:a.grupo2.seguro,"onUpdate:modelValue":o[13]||(o[13]=e=>a.grupo2.seguro=e),label:"Ap ProAccident",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",_o,[(0,n.Wm)(u,{modelValue:a.grupo2.deportico,"onUpdate:modelValue":o[14]||(o[14]=e=>a.grupo2.deportico=e),label:"Ap Deportico",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",Ao,[(0,n.Wm)(u,{modelValue:a.grupo2.decano,"onUpdate:modelValue":o[15]||(o[15]=e=>a.grupo2.decano=e),label:"Ap Decano",outlined:"",dense:"",required:""},null,8,["modelValue"])])])])),_:1}),(0,n.Wm)(f,{align:"right",class:"text-primary"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n.Wm)(d,{flat:"",color:"red",label:"Cancel",icon:"cancel"},null,512),[[x]]),(0,n.Wm)(d,{flat:"",color:"green",label:"Modificar",icon:"pencil",type:"submit",loading:a.loading},null,8,["loading"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])])])),_:1})}const Oo={name:"Grupos.vue",data(){return{loading:!1,dialogRegistro:!1,dialogModificar:!1,rangos:["SEMANAL","MENSUAL"],grupo:{},grupo2:{},grupos:[],filter:"",columns:[{name:"opcion",label:"OPCION"},{name:"tipo",label:"NOMBRE",field:"tipo"},{name:"detalle",label:"DESCRIPCION",field:"detalle"},{name:"rango",label:"RANGO",field:"rango"},{name:"sindical",label:"AP SINDICAL",field:"sindical"},{name:"seguro",label:"AP PROACCIDENT",field:"seguro"},{name:"deportico",label:"AP DEPORTICO",field:"deportico"},{name:"decano",label:"AP DECANO",field:"decano"},{name:"monto",label:"TOTAL",field:"monto"},{name:"multa",label:"MULTA",field:"multa"}]}},created(){this.listadoGrupo()},methods:{listreg(){this.grupo={},this.grupo.rango=this.rangos[0],this.dialogRegistro=!0},listadoGrupo(){this.$api.get("grupo").then((e=>{this.grupos=e.data}))},onSubmit(){this.loading=!0,this.$api.post("grupo",this.grupo).then((e=>{this.$q.notify({message:"Grupo Registrado",icon:"done",color:"green"}),this.dialogRegistro=!1,this.listadoGrupo(),this.loading=!1}))},updateGrupo(){this.loading=!0,this.$api.put("grupo/"+this.grupo2.id,this.grupo2).then((e=>{this.$q.notify({message:"Grupo Modificado",icon:"done",color:"green"}),this.dialogModificar=!1,this.listadoGrupo(),this.loading=!1}))},EliminarGrupo(e){this.$q.dialog({title:"Eliminar Grupo",message:"Esta seguro de eliminar?",cancel:!0,persistent:!1}).onOk((()=>{this.$api.delete("grupo/"+e.id).then((e=>{this.$q.notify({message:"Grupo Eliminado",icon:"done",color:"red"}),this.listadoGrupo()}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}}},Co=(0,r.Z)(Oo,[["render",Vo]]),yo=Co;I()(Oo,"components",{QPage:_.Z,QTable:A.Z,QTd:C.Z,QBtn:y.Z,QInput:V.Z,QIcon:O.Z,QDialog:ie.Z,QCard:ae.Z,QCardSection:ne.Z,QForm:se.Z,QSelect:de.Z,QCardActions:re.Z}),I()(Oo,"directives",{ClosePopup:ce.Z});var Eo=l(6970);const qo={class:"row"},Io={class:"col-3"},Wo={class:"col-3"},Do={class:"col-3"},ko={class:"col-3 flex flex-center"},Po={class:"row"},Uo={class:"col-2 flex flex-center"},So={class:"col-2 flex flex-center"},Lo={class:"col-2 flex flex-center"},Ro={class:"col-2 flex flex-center"},jo={class:"col-2 flex flex-center"},Mo={class:"row"},To={class:"col-6 text-h6"},No={class:"col-6"},zo={class:"row"},Zo={class:"col-2 flex flex-center"},$o={class:"col-2 flex flex-center"},Fo={class:"col-2 flex flex-center"},Qo={class:"col-2 flex flex-center"},Bo={class:"col-2 flex flex-center"},Go={class:"col-4"},Yo=(0,n._)("div",{id:"print",class:"hidden"},null,-1);function Ho(e,o,l,t,i,a){const s=(0,n.up)("q-input"),d=(0,n.up)("q-toggle"),r=(0,n.up)("q-btn"),c=(0,n.up)("q-form"),u=(0,n.up)("q-icon"),p=(0,n.up)("q-td"),m=(0,n.up)("q-table"),h=(0,n.up)("q-card-section"),f=(0,n.up)("q-card"),g=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(g,{class:"q-pa-xs"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{onSubmit:a.consultar,class:"q-gutter-md"},{default:(0,n.w5)((()=>[(0,n._)("div",qo,[(0,n._)("div",Io,[(0,n.Wm)(s,{modelValue:i.ini,"onUpdate:modelValue":o[0]||(o[0]=e=>i.ini=e),type:"date",label:"Fecha Desde",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",Wo,[(0,n.Wm)(s,{modelValue:i.fin,"onUpdate:modelValue":o[1]||(o[1]=e=>i.fin=e),type:"date",label:"Fecha Hast",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",Do,[(0,n.Wm)(d,{modelValue:i.cog,"onUpdate:modelValue":o[2]||(o[2]=e=>i.cog=e),label:i.cog+" COBRAR MULTA","true-value":"SI","false-value":"NO",onClick:a.cambiarCog},null,8,["modelValue","label","onClick"])]),(0,n._)("div",ko,[(0,n.Wm)(r,{color:"green",icon:"search",label:"Buscar",type:"submit"})])])])),_:1},8,["onSubmit"]),(0,n._)("div",Po,[(0,n._)("div",Uo,[(0,n.Wm)(r,{target:"_blank",type:"a",href:`${i.url}reportlistPago/1/${i.ini}/${i.fin}`,color:"primary",icon:"print",label:"Grupo A y B"},null,8,["href"])]),(0,n._)("div",So,[(0,n.Wm)(r,{target:"_blank",type:"a",href:`${i.url}reportlistPago/2/${i.ini}/${i.fin}`,color:"secondary",icon:"print",label:"GRUPO C"},null,8,["href"])]),(0,n._)("div",Lo,[(0,n.Wm)(r,{target:"_blank",type:"a",href:`${i.url}reportlistPago/3/${i.ini}/${i.fin}`,color:"green",icon:"print",label:"GRUPO D"},null,8,["href"])]),(0,n._)("div",Ro,[(0,n.Wm)(r,{target:"_blank",type:"a",href:`${i.url}reportlistPago/4/${i.ini}/${i.fin}`,color:"info",icon:"print",label:"GRUPO E"},null,8,["href"])]),(0,n._)("div",jo,[(0,n.Wm)(r,{target:"_blank",type:"a",href:`${i.url}reportlistPago/5/${i.ini}/${i.fin}`,color:"purple",icon:"print",label:"GRUPO F"},null,8,["href"])])]),(0,n.Wm)(m,{rows:i.pagos,columns:i.columns,dense:"","rows-per-page-options":[20,50,100,0],filter:i.filter},{"top-right":(0,n.w5)((()=>[(0,n.Wm)(s,{borderless:"",dense:"",debounce:"300",modelValue:i.filter,"onUpdate:modelValue":o[3]||(o[3]=e=>i.filter=e),placeholder:"Buscar"},{append:(0,n.w5)((()=>[(0,n.Wm)(u,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-opcion":(0,n.w5)((e=>[(0,n.Wm)(p,{props:e,"auto-width":""},{default:(0,n.w5)((()=>[0==e.row.anulado?((0,n.wg)(),(0,n.j4)(r,{key:0,icon:"print",dense:"",color:"info",onClick:o=>a.printPago(e.row)},null,8,["onClick"])):(0,n.kq)("",!0),0==e.row.anulado?((0,n.wg)(),(0,n.j4)(r,{key:1,icon:"delete",dense:"",color:"red",onClick:o=>a.anularPago(e.row)},null,8,["onClick"])):(0,n.kq)("",!0)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"]),(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n._)("div",Mo,[(0,n._)("div",To,"Total: "+(0,Eo.zw)(a.total)+" Bs",1),(0,n._)("div",No,[(0,n.Wm)(r,{color:"info",icon:"print",onClick:a.printPagoResumen},null,8,["onClick"])])]),(0,n.Wm)(m,{rows:i.resumen,"row-key":"name"},null,8,["rows"])])),_:1}),(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n._)("div",zo,[(0,n._)("div",Zo,[(0,n.Wm)(r,{target:"_blank",type:"a",href:`${i.url}reportlist/1/${i.ini}/${i.fin}`,color:"primary",icon:"print",label:"Grupo A y B","no-caps":""},null,8,["href"])]),(0,n._)("div",$o,[(0,n.Wm)(r,{target:"_blank",type:"a",href:`${i.url}reportlist/2/${i.ini}/${i.fin}`,color:"secondary",icon:"print",label:"Grupo C","no-caps":""},null,8,["href"])]),(0,n._)("div",Fo,[(0,n.Wm)(r,{target:"_blank",type:"a",href:`${i.url}reportlist/3/${i.ini}/${i.fin}`,color:"green",icon:"print",label:"Grupo D","no-caps":""},null,8,["href"])]),(0,n._)("div",Qo,[(0,n.Wm)(r,{target:"_blank",type:"a",href:`${i.url}reportlist/4/${i.ini}/${i.fin}`,color:"info",icon:"print",label:"Grupo E","no-caps":""},null,8,["href"])]),(0,n._)("div",Bo,[(0,n.Wm)(r,{target:"_blank",type:"a",href:`${i.url}reportlist/5/${i.ini}/${i.fin}`,color:"purple",icon:"print",label:"Grupo F","no-caps":""},null,8,["href"])])])])),_:1})])),_:1}),(0,n._)("div",Go,[(0,n.Wm)(r,{color:"info",icon:"download",label:"Export Excel",onClick:a.exportTable},null,8,["onClick"])]),(0,n.Wm)(m,{title:"Pagos semanales",rows:i.semanal,"row-key":"name",filter:i.filterPagos},{"top-right":(0,n.w5)((()=>[(0,n.Wm)(s,{borderless:"",dense:"",debounce:"300",modelValue:i.filterPagos,"onUpdate:modelValue":o[4]||(o[4]=e=>i.filterPagos=e),placeholder:"Buscar"},{append:(0,n.w5)((()=>[(0,n.Wm)(u,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["rows","filter"]),Yo])),_:1})}var Jo=l(3878),Xo=l.n(Jo);const Ko={name:"Pagos",data(){return{url:"https://bbio.tuprogam.com/api/",filterPagos:"",pagos:[],moment:Xo(),semanal:[],semanalP:[],semanalA:[],filter:"",cog:"SI",titulos:[],resumen:[],ini:Xo()().day("Monday").format("YYYY-MM-DD"),fin:Xo()().day("Saturday").add(1,"days").format("YYYY-MM-DD"),columns:[{name:"opcion",label:"OPCION",field:"opcion"},{name:"id",label:"ID",field:"id"},{name:"codmovil",label:"CODMOVIL",field:e=>e.vehiculo.codmovil},{name:"monto",label:"MONTO",field:"monto"},{name:"multa",label:"MULTA",field:"multa"},{name:"fecha",label:"FECHA",field:"fecha"},{name:"hora",label:"HORA",field:"hora"},{name:"grupo",label:"GRUPO",field:e=>e.grupo.tipo},{name:"afiliado",label:"AFILIADO",field:e=>e.afiliado.nombres+" "+e.afiliado.apellidos},{name:"vehiculo",label:"VEHICULO",field:e=>e.vehiculo.placa},{name:"estado",label:"ESTADO",field:"estado"},{name:"anulado",label:"ANULADO",field:"motivo"}]}},created(){this.consultar(),this.recuperaCog()},methods:{recuperaCog(){this.$api.get("cog").then((e=>{"active"==e.data.state?this.cog="SI":this.cog="NO"}))},cambiarCog(){let e="";e="SI"==this.cog?"active":"inactive",this.$api.post("modcog",{estado:e}).then((e=>{}))},printPagoResumen(){const e=new b.ZP;let o="<style>        .titulo1{font-size:10px; text-align: center;}        .titulo2{font-size:14px; text-align: center; font-weight: bold;}        .titulo3{font-size:10px; text-align: center;}        .titulo5{font-size:15px; text-align: center;}        .titulo4{font-size:12px; text-align: center; font-weight: bold;}        .texto4{font-size:20px; text-align: center; font-weight: normal;}        .texto5{font-size:28px; text-align: center; font-weight: normal;}        .texto1{font-size:10px; text-align: center; font-weight: normal;}        .texto2{font-size:14px; text-align: center; font-weight: normal;}        .texto3{font-size:8px; text-align: center; font-weight: normal;}        table{width:100%}        img{width:70px;height:70px;}        </style>          <div id='print'>          <div class='titulo2'>PAGOS POR GRUPO "+this.ini+" al "+this.fin+" </div><br>          <table>           <tr><th>GRUPO</th><th>SINDICAL</th><th>DECANO</th><th>DEPORTIVO</th><th>PROACCIDENTE</th><th>TOTAL</th></tr>";this.resumen.forEach((e=>{o+="<tr><td>"+e.grupo+"</td><td>"+e.sindical+"</td><td>"+e.decano+"</td><td>"+e.deportivo+"</td><td>"+e.proaccidente+"</td><td>"+e.total+"</td></tr>"})),o+="</table></div>",document.getElementById("print").innerHTML=o,e.print(document.getElementById("print"))},imprimir(e){this.$api.post("pagoConsulta",{ini:this.ini,fin:this.fin,grupo_id:e}).then((e=>{console.log(e.data)}))},consultar(){this.$api.post("consultapago",{ini:this.ini,fin:this.fin}).then((e=>{this.pagos=e.data,this.$api.post("resumenPago",{ini:this.ini,fin:this.fin}).then((e=>{this.resumen=e.data,this.resumen.push({grupo:"TOTALES",sindical:this.totalsindical,decano:this.totaldecano,deportivo:this.totaldeportivo,proaccidente:this.totalproaccidente,total:this.total})}))})),this.consultimp()},consultimp(){this.titulos=[],this.semanalA=[],this.semanalP=[],this.$api.post("datoimp",{ini:this.ini,fin:this.fin}).then((e=>{console.log(e.data),this.semanal=e.data,e.data.forEach((e=>{"ACTIVO"==e.estado?this.semanalA.push(e):this.semanalP.push(e)}));for(let o in this.semanal[0])this.titulos.push({label:o,value:o});console.log(this.titulos)}))},exportTable(){if(0==this.titulos.length)return!1;let e=[{sheet:"Activos",columns:this.titulos,content:this.semanalA},{sheet:"Pasivos",columns:this.titulos,content:this.semanalP}],o={fileName:"Pagos",extraLength:20,writeOptions:{}};Xe()(e,o)},printPago(e){console.log(e);const o=new b.ZP;let l=e.multa>0?"TIENE MULTA POR RETRASO":"",t="<style>        .titulo1{font-size:10px; text-align: center;}        .titulo2{font-size:14px; text-align: center; font-weight: bold;}        .titulo3{font-size:10px; text-align: center;}        .titulo5{font-size:15px; text-align: center;}        .titulo4{font-size:12px; text-align: center; font-weight: bold;}        .texto4{font-size:20px; text-align: center; font-weight: normal;}        .texto5{font-size:28px; text-align: center; font-weight: normal;}        .texto1{font-size:10px; text-align: center; font-weight: normal;}        .texto2{font-size:14px; text-align: center; font-weight: normal;}        .texto3{font-size:8px; text-align: center; font-weight: normal;}        table{width:100%}        img{width:70px;height:70px;}        </style>          <div id='print'>          <table><tr><td class='texto5'>N° Movil "+e.vehiculo.codmovil+"</td><td class='texto4'>"+e.grupo.tipo+"</td></tr><table/>          <table>          <tr><td style='width:20%'><img src='images/logo.png'></td>          <td class='titulo1'  style='width:50%'>SINDICATO MIXTO DE TRANSPORTE<br><span class='titulo2'>26 DE JULIO</span><br><span class='titulo3' FUNDADO EL 26 DE JULIO DE 1970 <br> RESOLUCION SUPREMA 27465</span><br><br><span class='titulo2'> HOJA DE APORTES</span></td>          <td class='titulo1'> FECHA<br>"+e.fecha+" "+e.hora+"<br><span class='titulo5'> N° Movil "+e.vehiculo.codmovil+" </span><br><span   >No "+e.id+"</span></td></tr>          </table>          <table><tr>          <td class='col-4 titulo4'>GRUPO<br><span class='texto1'>"+e.grupo.tipo+"</span></td><td class='col-4 titulo4'>PLACA<br><span class='texto5'>"+e.vehiculo.placa+"</span></td><td class='col-4 titulo4'>TOTAL Bs<br><span class='texto1'>"+parseFloat(e.monto).toFixed(2)+"</span></td>          </tr></table>          <div class='col-12 titulo4'>AFILIADO</div><div class='col-12 texto2'>"+e.afiliado.nombres+" "+e.afiliado.apellidos+"</div>          <div class='titulo4'>OBSERVACION: <span class='texto1'>"+l+"</span></div>          </div><br><br>          <table><tr>          <td class='texto3'>Secretario de Hacienda<br>VoBo</td><td class='texto3'>Agente de Control</td>          </tr></table>          </div>";document.getElementById("print").innerHTML=t,o.print(document.getElementById("print"))},anularPago(e){this.$q.dialog({title:"ANULAR PAGO",message:"Cual es el motivo ?",prompt:{model:"",type:"text"},cancel:!0,persistent:!1}).onOk((o=>{if(""==o)return!1;this.$api.post("anularPago",{pago:e.id,motivo:o}).then((e=>{console.log(e.data),this.consultar()}))})).onCancel((()=>{})).onDismiss((()=>{}))}},computed:{total(){return this.pagos.reduce(((e,o)=>e+parseFloat(o.monto)),0)},totalMulta(){return this.pagos.reduce(((e,o)=>e+parseFloat(o.multa)),0)},totalSemanal(){return this.semanal.reduce(((e,o)=>e+parseFloat(o.monto)),0)},totalMultaSemanal(){return this.semanal.reduce(((e,o)=>e+parseFloat(o.multa)),0)},totalsindical(){return this.resumen.reduce(((e,o)=>e+parseFloat(o.sindical)),0)},totaldecano(){return this.resumen.reduce(((e,o)=>e+parseFloat(o.decano)),0)},totaldeportivo(){return this.resumen.reduce(((e,o)=>e+parseFloat(o.deportivo)),0)},totalproaccidente(){return this.resumen.reduce(((e,o)=>e+parseFloat(o.proaccidente)),0)}}};var el=l(3175);const ol=(0,r.Z)(Ko,[["render",Ho]]),ll=ol;I()(Ko,"components",{QPage:_.Z,QForm:se.Z,QInput:V.Z,QToggle:el.Z,QBtn:y.Z,QTable:A.Z,QIcon:O.Z,QTd:C.Z,QCard:ae.Z,QCardSection:ne.Z});const tl={class:"col-12"},il={class:"text-h5 text-center"},al={class:"row"};function nl(e,o,l,t,i,a){const s=(0,n.up)("q-select"),d=(0,n.up)("q-btn"),r=(0,n.up)("q-icon"),c=(0,n.up)("q-input"),u=(0,n.up)("q-table"),p=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(p,null,{default:(0,n.w5)((()=>[(0,n._)("div",tl,[(0,n._)("div",il,"LISTA DE AFILIADOS "+(0,Eo.zw)(i.grupo.tipo),1),(0,n._)("div",al,[(0,n.Wm)(s,{outlined:"",modelValue:i.grupo,"onUpdate:modelValue":o[0]||(o[0]=e=>i.grupo=e),options:i.grupos,label:"GRUPO"},null,8,["modelValue","options"]),(0,n.Wm)(d,{color:"info",label:"BUSCAR",icon:"search",onClick:a.listadoAfiliado},null,8,["onClick"])]),(0,n.Wm)(u,{rows:i.afiliados,columns:i.columns},{"top-right":(0,n.w5)((()=>[(0,n.Wm)(c,{borderless:"",dense:"",debounce:"300",modelValue:i.filter,"onUpdate:modelValue":o[1]||(o[1]=e=>i.filter=e),placeholder:"Buscar"},{append:(0,n.w5)((()=>[(0,n.Wm)(r,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["rows","columns"])])])),_:1})}const sl={name:"Listado.vue",data(){return{loading:!1,afiliados:[],grupos:[],grupo:{},filter:"",exped:["OR","LP","PT","PD","BE","CB","CH","TJ","SC","EX"],columns:[{name:"ci",label:"CI",field:"ci"},{name:"expedido",label:"EXPEDIDO",field:"expedido"},{name:"nombres",label:"NOMBRES",field:"nombres"},{name:"apellidos",label:"APELLIDOS",field:"apellidos"},{name:"codigo",label:"TELEFONO",field:"codigo"},{name:"placa",label:"PLACA",field:"placa"}]}},created(){this.listadoGrupo(),this.listadoAfiliado()},methods:{listadoGrupo(){this.grupos=[],this.$api.get("grupo").then((e=>{e.data.forEach((e=>{e.label=e.tipo,this.grupos.push(e)})),this.grupo=this.grupos[0]}))},listadoAfiliado(){this.$api.post("listGrupoAf",{id:this.grupo.id}).then((e=>{this.afiliados=e.data}))}}},dl=(0,r.Z)(sl,[["render",nl]]),rl=dl;I()(sl,"components",{QPage:_.Z,QSelect:de.Z,QBtn:y.Z,QTable:A.Z,QInput:V.Z,QIcon:O.Z});const cl={class:"row"},ul={class:"col-12 col-sm-3"},pl={class:"col-12 col-sm-3 flex flex-center"},ml={class:"row"},hl={class:"col-3 flex flex-center"},fl={class:"col-3 flex flex-center"},gl={class:"col-3 flex flex-center"},bl={class:"col-3 flex flex-center"},vl=(0,n._)("div",{id:"print",class:"hidden"},null,-1);function wl(e,o,l,t,i,a){const s=(0,n.up)("q-input"),d=(0,n.up)("q-btn"),r=(0,n.up)("q-form"),c=(0,n.up)("q-btn-group"),u=(0,n.up)("q-td"),p=(0,n.up)("q-table"),m=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(r,{onSubmit:a.consultar,class:"q-gutter-md"},{default:(0,n.w5)((()=>[(0,n._)("div",cl,[(0,n._)("div",ul,[(0,n.Wm)(s,{modelValue:i.fecha,"onUpdate:modelValue":o[0]||(o[0]=e=>i.fecha=e),type:"date",label:"Fecha",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",pl,[(0,n.Wm)(d,{loading:i.loading,color:"green",icon:"search",label:"Buscar",type:"submit"},null,8,["loading"])])])])),_:1},8,["onSubmit"]),(0,n._)("div",ml,[(0,n._)("div",hl,[(0,n.Wm)(d,{target:"_blank",type:"a",href:`${i.url}repAsistencia/${i.fecha}/1`,color:"primary",icon:"print",label:"Grupo A y B"},null,8,["href"])]),(0,n._)("div",fl,[(0,n.Wm)(d,{target:"_blank",type:"a",href:`${i.url}repAsistencia/${i.fecha}/2`,color:"secondary",icon:"print",label:"GRUPO C"},null,8,["href"])]),(0,n._)("div",gl,[(0,n.Wm)(d,{target:"_blank",type:"a",href:`${i.url}repAsistencia/${i.fecha}/3`,color:"green",icon:"print",label:"GRUPO D"},null,8,["href"])]),(0,n._)("div",bl,[(0,n.Wm)(d,{target:"_blank",type:"a",href:`${i.url}repAsistencia/${i.fecha}/4`,color:"info",icon:"print",label:"GRUPO E"},null,8,["href"])])]),(0,n.Wm)(p,{rows:i.asistencias,columns:i.columns,dense:"","rows-per-page-options":[20,50,100,0]},{"body-cell-option":(0,n.w5)((e=>[(0,n.Wm)(u,{"auto-width":"",props:e},{default:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,{round:"",loading:i.loading,dense:"",color:"negative",icon:"delete",onClick:o=>a.eliminar(e.row)},null,8,["loading","onClick"]),(0,n.Wm)(d,{round:"",loading:i.loading,dense:"",color:"info",icon:"print",onClick:o=>a.imprimir(e.row)},null,8,["loading","onClick"])])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns"]),vl])),_:1})}const xl={name:"Asistencia",data(){return{url:"https://bbio.tuprogam.com/api/",asistencias:[],fecha:ee.ZP.formatDate(Date.now(),"YYYY-MM-DD"),loading:!1,columns:[{name:"option",label:"Opciónes",field:"option",align:"center"},{name:"codmovil",label:"MOVIL",field:"codmovil"},{name:"fecha",label:"FECHA",field:"fecha"},{name:"afiliado",label:"AFILIADO",field:e=>e.nombres+" "+e.apellidos},{name:"ci",label:"CI",field:e=>e.ci+" "+e.expedido},{name:"telefono",label:"Telefono",field:e=>e.telefono}]}},created(){this.consultar()},methods:{consultar(){this.$api.post("reporte",{fecha:this.fecha}).then((e=>{console.log(e.data),this.asistencias=e.data}))},imprimir(e){this.loading=!0,this.$api.post("printAsistencia",{afiliado_id:e.afiliado_id}).then((e=>{this.loading=!1;let o=e.data.data;const l=new b.ZP;console.log(o);let t="<style>        .titulo1{font-size:10px; text-align: center;}        .titulo2{font-size:14px; text-align: center; font-weight: bold;}        .titulo3{font-size:10px; text-align: center;}        .titulo5{font-size:8px; text-align: center;}        .titulo4{font-size:12px; text-align: center; font-weight: bold;}        .texto1{font-size:10px; text-align: center; font-weight: normal;}        .texto2{font-size:14px; text-align: center; font-weight: normal;}        .texto3{font-size:8px; text-align: center; font-weight: normal;}        table{width:100%}        img{width:70px;height:70px;}        </style>          <div id='print'>          <table>          <tr><td style='width:20%'><img src='images/logo.png'></td>          <td class='titulo1'  style='width:50%'>SINDICATO MIXTO DE TRANSPORTE<br><span class='titulo2'>26 DE JULIO</span><br><span class='titulo3' FUNDADO EL 26 DE JULIO DE 1970 <br> RESOLUCION SUPREMA 27465</span><br><br><span class='titulo2'> ASISTENCIA</span></td>          <td class='titulo1'> FECHA<br>"+o.fecha+" "+o.hora+"<br><span class='titulo5'> N° Movil "+o.afiliado.codigo+" </span><br><span   >No "+o.id+"</span></td></tr>          </table>          <div class='col-12 titulo4'>AFILIADO</div><div class='col-12 texto2'>"+o.afiliado.nombres+" "+o.afiliado.apellidos+"</div>          <div class='titulo4'>Muchas gracias por su Asistencia</div>          </div><br><br>          <table><tr>          <td class='texto3'>Secretario de Hacienda<br>VoBo</td><td class='texto3'>Agente de Control</td>          </tr></table>          </div>";document.getElementById("print").innerHTML=t,l.print(document.getElementById("print"))}))},eliminar(e){this.$q.dialog({title:"Eliminar",message:"¿Está seguro de eliminar el registro?",cancel:!0,persistent:!0}).onOk((()=>{this.$api.delete(`asistencia/${e.id}`).then((e=>{this.$q.notify({message:"Registro eliminado",color:"green-4",textColor:"white",icon:"check"}),this.consultar()}))}))}}};var _l=l(7236);const Al=(0,r.Z)(xl,[["render",wl]]),Vl=Al;I()(xl,"components",{QPage:_.Z,QForm:se.Z,QInput:V.Z,QBtn:y.Z,QTable:A.Z,QTd:C.Z,QBtnGroup:_l.Z});const Ol={class:"q-pa-md"},Cl={class:"text-h7"},yl={class:"row"},El={class:"col-6"},ql={class:"col-6"},Il=(0,n._)("div",{class:"text-5"},"Permisos",-1),Wl={class:"text-h7"},Dl=(0,n._)("span",{class:"q-ml-sm"},"Seguro de eliminar Registro.",-1),kl={class:"text-h7 text-white"};function Pl(e,o,l,i,a,s){const d=(0,n.up)("q-btn"),r=(0,n.up)("q-icon"),c=(0,n.up)("q-card-section"),u=(0,n.up)("q-input"),p=(0,n.up)("q-checkbox"),m=(0,n.up)("q-form"),h=(0,n.up)("q-card"),f=(0,n.up)("q-dialog"),g=(0,n.up)("q-td"),b=(0,n.up)("q-table"),v=(0,n.up)("q-avatar"),w=(0,n.up)("q-card-actions"),x=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.iD)("div",Ol,[(0,n.Wm)(d,{label:"Nuevo usuario",color:"positive",onClick:s.regDialog,icon:"add_circle",class:"q-mb-xs"},null,8,["onClick"]),(0,n.Wm)(f,{modelValue:a.alert,"onUpdate:modelValue":o[4]||(o[4]=e=>a.alert=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{style:{"max-width":"80%",width:"50%"}},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{class:"bg-green-14 text-white"},{default:(0,n.w5)((()=>[(0,n._)("div",Cl,[(0,n.Wm)(r,{name:"add_circle"}),(0,n.Uk)(" REGISTRO DE NUEVO USUARIO")])])),_:1}),(0,n.Wm)(c,{class:"q-pt-xs"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{onSubmit:s.onSubmit,onReset:s.onReset,class:"q-gutter-md"},{default:(0,n.w5)((()=>[(0,n._)("div",yl,[(0,n._)("div",El,[(0,n.Wm)(u,{filled:"",modelValue:a.dato.name,"onUpdate:modelValue":o[0]||(o[0]=e=>a.dato.name=e),type:"text",label:"Nombre ",hint:"Ingresar Nombre","lazy-rules":"",rules:[e=>e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"]),(0,n.Wm)(u,{filled:"",modelValue:a.dato.email,"onUpdate:modelValue":o[1]||(o[1]=e=>a.dato.email=e),type:"email",label:"Email",hint:"Correo electronico","lazy-rules":"",rules:[e=>e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"]),(0,n.Wm)(u,{filled:"",modelValue:a.dato.password,"onUpdate:modelValue":o[2]||(o[2]=e=>a.dato.password=e),type:"password",label:"Contraseña",hint:"Contraseña","lazy-rules":"",rules:[e=>e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"]),(0,n.Wm)(u,{filled:"",modelValue:a.dato.fechaLimite,"onUpdate:modelValue":o[3]||(o[3]=e=>a.dato.fechaLimite=e),type:"date",label:"Fecha Limite","lazy-rules":"",rules:[e=>e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"])]),(0,n._)("div",ql,[Il,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.permisos,((e,o)=>((0,n.wg)(),(0,n.j4)(p,{style:{width:"100%"},key:o,label:e.nombre,modelValue:e.estado,"onUpdate:modelValue":o=>e.estado=o},null,8,["label","modelValue","onUpdate:modelValue"])))),128))])]),(0,n._)("div",null,[(0,n.Wm)(d,{label:"Crear",type:"submit",color:"positive",icon:"add_circle"}),(0,n.wy)((0,n.Wm)(d,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[x]])])])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(b,{filter:a.filter,title:"REGISTRO DE USUARIOS",rows:a.data,columns:a.columns,"row-key":"name","rows-per-page-options":[50,100]},{"top-right":(0,n.w5)((()=>[(0,n.Wm)(u,{borderless:"",dense:"",debounce:"300",modelValue:a.filter,"onUpdate:modelValue":o[5]||(o[5]=e=>a.filter=e),placeholder:"Search"},{append:(0,n.w5)((()=>[(0,n.Wm)(r,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-permisos":(0,n.w5)((e=>[(0,n.Wm)(g,{key:"permisos",props:e},{default:(0,n.w5)((()=>[(0,n._)("ul",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.row.permisos,((e,o)=>((0,n.wg)(),(0,n.iD)("li",{key:o},(0,Eo.zw)(e.nombre),1)))),128))])])),_:2},1032,["props"])])),"body-cell-opcion":(0,n.w5)((e=>[(0,n.Wm)(g,{key:"opcion",props:e},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{dense:"",round:"",flat:"",color:"yellow",onClick:o=>s.editRow(e),icon:"edit"},null,8,["onClick"]),(0,n.Wm)(d,{dense:"",round:"",flat:"",color:"positive",onClick:o=>s.cambiopass(e),icon:"vpn_key"},null,8,["onClick"]),(0,n.Wm)(d,{dense:"",round:"",flat:"",color:"green-10",onClick:o=>s.mispermisos(e),icon:"post_add"},null,8,["onClick"]),(0,n.Wm)(d,{dense:"",round:"",flat:"",color:"red",onClick:o=>s.deleteRow(e),icon:"delete"},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["filter","rows","columns"]),(0,n.Wm)(f,{modelValue:a.dialog_mod,"onUpdate:modelValue":o[8]||(o[8]=e=>a.dialog_mod=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{style:{"max-width":"80%",width:"50%"}},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{class:"bg-warning text-white"},{default:(0,n.w5)((()=>[(0,n._)("div",Wl,[(0,n.Wm)(r,{name:"edit"}),(0,n.Uk)(" MODIFICAR DATOS DE USUARIO")])])),_:1}),(0,n.Wm)(c,{class:"q-pt-xs"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{onSubmit:s.onMod,class:"q-gutter-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{filled:"",modelValue:a.dato2.name,"onUpdate:modelValue":o[6]||(o[6]=e=>a.dato2.name=e),type:"text",label:"Nombre ",hint:"Ingresar Nombre","lazy-rules":"",rules:[e=>e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"]),(0,n.Wm)(u,{filled:"",modelValue:a.dato2.email,"onUpdate:modelValue":o[7]||(o[7]=e=>a.dato2.email=e),type:"email",label:"Email",hint:"Correo electronico","lazy-rules":"",rules:[e=>e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"]),(0,n._)("div",null,[(0,n.Wm)(d,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,n.wy)((0,n.Wm)(d,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[x]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(f,{modelValue:a.dialog_del,"onUpdate:modelValue":o[9]||(o[9]=e=>a.dialog_del=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{class:"row items-center"},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{icon:"clear",color:"red","text-color":"white"}),Dl])),_:1}),(0,n.Wm)(w,{align:"right"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{flat:"",label:"Eliminar",color:"deep-orange",onClick:s.onDel},null,8,["onClick"]),(0,n.wy)((0,n.Wm)(d,{flat:"",label:"Cancelar",color:"primary"},null,512),[[x]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(f,{modelValue:a.modelpermiso,"onUpdate:modelValue":o[10]||(o[10]=e=>a.modelpermiso=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{style:{width:"700px","max-width":"80vw"}},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{class:"bg-info"},{default:(0,n.w5)((()=>[(0,n._)("div",kl,[(0,n.Wm)(r,{name:"folder"}),(0,n.Uk)(" PERMISOS DE ACCESO")])])),_:1}),(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(m,{onSubmit:(0,t.iM)(s.updatepermisos,["prevent"])},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.permisos2,((e,o)=>((0,n.wg)(),(0,n.j4)(p,{style:{width:"100%"},key:o,label:e.nombre,modelValue:e.estado,"onUpdate:modelValue":o=>e.estado=o},null,8,["label","modelValue","onUpdate:modelValue"])))),128)),(0,n.Wm)(d,{type:"submit",color:"info",icon:"send",label:"Actualizar"})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}const{addToDate:Ul}=ee.ZP,Sl={name:"User",data(){return{alert:!1,dialog_mod:!1,dialog_del:!1,fecha:ee.ZP.formatDate(new Date,"YYYY-MM-DD"),filter:"",dato:{fechaLimite:Xo()(this.fecha).add(36,"months").format("YYYY-MM-DD")},model:"",dato2:{},options:[],props:[],unidades:[],permisos:[],permisos2:[],modelpermiso:!1,uni:{},columns:[{name:"name",align:"left",label:"NOMBRE ",field:"name",sortable:!0},{name:"email",align:"left",label:"E-MAIL",field:"email",sortable:!0},{name:"permisos",align:"left",label:"PERMISOS",field:"permisos",sortable:!0},{name:"opcion",label:"OPCIÓN",field:"action",sortable:!1}],data:[]}},created(){this.misdatos(),this.$api.get("permiso").then((e=>{e.data.forEach((e=>{this.permisos.push({id:e.id,nombre:e.nombre,estado:!1}),this.permisos2.push({id:e.id,nombre:e.nombre,estado:!1})}))}))},methods:{regDialog(){this.dato={fechaLimite:Xo()(this.fecha).add(36,"months").format("YYYY-MM-DD")},this.alert=!0},updatepermisos(){this.$api.put("updatepermisos/"+this.dato2.id,{permisos:this.permisos2}).then((e=>{this.modelpermiso=!1,this.misdatos()})).catch((e=>{this.$q.notify({message:e.response.data.message,icon:"close",color:"red"})}))},mispermisos(e){let o;this.modelpermiso=!0,this.dato2=e.row,this.permisos2.forEach((e=>{o=this.dato2.permisos.find((o=>o.pivot.permiso_id==e.id)),e.estado=void 0!=o}))},misdatos(){this.$q.loading.show(),this.$api.get("user").then((e=>{console.log(e.data),this.data=e.data,this.$q.loading.hide()}))},editRow(e){this.dato2=e.row,this.dato2.unid_id=e.row.unid,this.dialog_mod=!0},deleteRow(e){this.dato2=e.row,this.dialog_del=!0},onSubmit(){this.$q.loading.show(),this.$api.post("user",{name:this.dato.name,password:this.dato.password,email:this.dato.email,permisos:this.permisos,fechaLimite:this.dato.fechaLimite}).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.dato={fechaLimite:Xo()(this.fecha).add(36,"months").format("YYYY-MM-DD")},this.alert=!1,this.misdatos()})).catch((e=>{console.log(e.response.data),this.$q.notify({message:e.response.data.message,icon:"close",color:"red"}),this.$q.loading.hide()}))},onMod(){this.$q.loading.show(),this.$api.put("user/"+this.dato2.id,{name:this.dato2.name,email:this.dato2.email}).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.misdatos()}))},onDel(){this.$q.loading.show(),this.$api.delete("user/"+this.dato2.id).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.dialog_del=!1,this.misdatos()})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,icon:"error",color:"red"})}))},onReset(){this.dato.nombre=null,this.dato.inicio=0,this.dato.fin=0},cambiopass(e){this.$q.dialog({title:"CAMBIAR PASSWORD",message:"Ingresar nueva contraseña",prompt:{model:"",type:"password"},cancel:!0,persistent:!0}).onOk((o=>{this.$q.loading.show(),this.$api.put("updatePassword/"+e.row.id,{password:o}).then((e=>{this.$q.loading.hide()}))})).onCancel((()=>{})).onDismiss((()=>{}))}}};var Ll=l(1221),Rl=l(1357);const jl=(0,r.Z)(Sl,[["render",Pl]]),Ml=jl;I()(Sl,"components",{QBtn:y.Z,QDialog:ie.Z,QCard:ae.Z,QCardSection:ne.Z,QIcon:O.Z,QForm:se.Z,QInput:V.Z,QCheckbox:Ll.Z,QTable:A.Z,QTd:C.Z,QAvatar:Rl.Z,QCardActions:re.Z}),I()(Sl,"directives",{ClosePopup:ce.Z});const Tl=e=>((0,n.dD)("data-v-519eafb6"),e=e(),(0,n.Cn)(),e),Nl={class:"row"},zl=Tl((()=>(0,n._)("div",{class:"col-1 col-sm-4"},null,-1))),Zl={class:"col-10 col-sm-4"},$l=Tl((()=>(0,n._)("div",{class:"text-subtitle1 text-center q-pt-xs text-grey"},"CUENTA",-1))),Fl=Tl((()=>(0,n._)("div",{class:"text-h2 text-center q-pa-xs text-black text-bold"},"Tu Cuenta",-1))),Ql={class:"row"},Bl={class:"col-12"},Gl={class:"col-12 q-pt-lg"},Yl={class:"col-12 q-py-xs"},Hl={class:"col-12 q-pt-xs"},Jl=Tl((()=>(0,n._)("div",{class:"col-12 q-pt-xs"},null,-1))),Xl=Tl((()=>(0,n._)("div",{class:"col-12 text-center q-py-none"},[(0,n._)("a",{href:"",class:"text-blue-8"},"¿Olvidaste tu contraseña?")],-1))),Kl=Tl((()=>(0,n._)("div",{class:"text-subtitle1 text-center text-caption q-pt-lg text-grey"},[(0,n.Uk)("AL INICIAR SESIÓN, USTED ACEPTA LOS "),(0,n._)("a",{href:"",class:"text-blue-8"},"TÉRMINOS DEL SERVICIO"),(0,n.Uk)(" Y "),(0,n._)("a",{href:"",class:"text-blue-8"},"LA POLÍTICA DE PRIVACIDAD")],-1))),et=Tl((()=>(0,n._)("div",{class:"col-1 col-sm-4"},null,-1)));function ot(e,o,l,i,a,s){const d=(0,n.up)("q-input"),r=(0,n.up)("q-icon"),c=(0,n.up)("q-checkbox"),u=(0,n.up)("q-btn"),p=(0,n.up)("q-form"),m=(0,n.up)("q-card-section"),h=(0,n.up)("q-card"),f=(0,n.up)("q-page"),g=(0,n.up)("q-page-container"),b=(0,n.up)("q-layout");return(0,n.wg)(),(0,n.j4)(b,{view:"lHh Lpr lFf",class:"bg-grey-2"},{default:(0,n.w5)((()=>[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n._)("div",Nl,[zl,(0,n._)("div",Zl,[$l,Fl,(0,n.Wm)(h,{flat:"",bordered:""},{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{class:"q-pa-lg",onSubmit:(0,t.iM)(s.login,["prevent"])},{default:(0,n.w5)((()=>[(0,n._)("div",Ql,[(0,n._)("div",Bl,[(0,n.Wm)(d,{outlined:"",modelValue:a.email,"onUpdate:modelValue":o[0]||(o[0]=e=>a.email=e),label:"Email",type:"email",required:""},null,8,["modelValue"])]),(0,n._)("div",Gl,[(0,n.Wm)(d,{outlined:"",modelValue:a.password,"onUpdate:modelValue":o[2]||(o[2]=e=>a.password=e),label:"Contraseña",type:a.typePassword?"password":"text",required:""},{append:(0,n.w5)((()=>[(0,n.Wm)(r,{onClick:o[1]||(o[1]=e=>a.typePassword=!a.typePassword),name:a.typePassword?"visibility":"visibility_off"},null,8,["name"])])),_:1},8,["modelValue","type"])]),(0,n._)("div",Yl,[(0,n.Wm)(c,{modelValue:a.remember,"onUpdate:modelValue":o[3]||(o[3]=e=>a.remember=e),class:"grey",label:"Recuérdame",size:"30px"},null,8,["modelValue"])]),(0,n._)("div",Hl,[(0,n.Wm)(u,{size:"22px",loading:a.loading,class:"full-width bold",color:"primary",label:"Iniciar Sesión",type:"submit","no-caps":""},null,8,["loading"])]),Jl,Xl])])),_:1},8,["onSubmit"])])),_:1})])),_:1}),Kl]),et])])),_:1})])),_:1})])),_:1})}const lt={name:"Login",data(){return{email:"",password:"",remember:!1,typePassword:!0,loading:!1,store:(0,v.c)()}},mounted(){this.store.isLoggedIn&&this.$router.push("/")},methods:{login(){this.loading=!0,this.$api.post("login",{email:this.email,password:this.password}).then((e=>{this.$q.notify({message:"Bienvenido",color:"positive",icon:"check_circle",position:"top"}),console.log(e.data),this.$router.push("/"),this.store.user=e.data.user,this.store.isLoggedIn=!0,e.data.user.permisos.forEach((e=>{1==e.id&&(this.store.booluser=!0),2==e.id&&(this.store.boolafiliado=!0),3==e.id&&(this.store.boolgrupo=!0),4==e.id&&(this.store.boolvehiculo=!0),5==e.id&&(this.store.boolpago=!0),6==e.id&&(this.store.boolprint=!0),7==e.id&&(this.store.boolasistencia=!0)})),this.$api.defaults.headers.common["Authorization"]="Bearer "+e.data.token,localStorage.setItem("tokenBio",e.data.token)})).catch((e=>{console.log(e),this.$q.notify({message:e.response.data.message,color:"negative",position:"top",timeout:2e3})})).finally((()=>{this.loading=!1}))}}};var tt=l(7605),it=l(2133);const at=(0,r.Z)(lt,[["render",ot],["__scopeId","data-v-519eafb6"]]),nt=at;I()(lt,"components",{QLayout:tt.Z,QPageContainer:it.Z,QPage:_.Z,QCard:ae.Z,QCardSection:ne.Z,QForm:se.Z,QInput:V.Z,QIcon:O.Z,QCheckbox:Ll.Z,QBtn:y.Z});const st={class:"row"},dt=(0,n._)("div",{class:"col-12"},[(0,n._)("div",{class:"text-h5 text-center bg-green-5 text-white"},"Asistencia Manual")],-1),rt={class:"col-12"};function ct(e,o,l,t,i,a){const s=(0,n.up)("q-btn"),d=(0,n.up)("q-td"),r=(0,n.up)("q-icon"),c=(0,n.up)("q-input"),u=(0,n.up)("q-table"),p=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(p,null,{default:(0,n.w5)((()=>[(0,n._)("div",st,[dt,(0,n._)("div",rt,[(0,n.Wm)(u,{rows:i.afiliados,columns:i.columns,filter:i.filter,flat:"",bordered:"",dense:"","rows-per-page-options":[0]},{"body-cell-opcion":(0,n.w5)((e=>[(0,n.Wm)(d,{key:"opcion",props:e},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{dense:"",icon:"print",color:"primary",onClick:o=>a.asistencia(e.row)},null,8,["onClick"])])),_:2},1032,["props"])])),"top-right":(0,n.w5)((()=>[(0,n.Wm)(c,{outlined:"",dense:"",debounce:"300",modelValue:i.filter,"onUpdate:modelValue":o[0]||(o[0]=e=>i.filter=e),placeholder:"Buscar"},{append:(0,n.w5)((()=>[(0,n.Wm)(r,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["rows","columns","filter"])])])])),_:1})}const ut={name:"Afiliados.vue",data(){return{loading:!1,dialogRegistro:!1,dialogModificar:!1,afiliado:{fechaing:ee.ZP.formatDate(Date.now(),"YYYY-MM-DD")},afiliado2:{},afiliados:[],filter:"",exped:["OR","LP","PT","PD","BE","CB","CH","TJ","SC","EX"],columns:[{name:"opcion",label:"OPCION",align:"center"},{name:"ci",label:"CI",field:"ci",align:"left"},{name:"expedido",label:"EXPEDIDO",field:"expedido",align:"left"},{name:"codigo",label:"NUM MOVIL",field:"codigo",align:"left"},{name:"telfono",label:"TELEFONO",field:"telefono",align:"left"},{name:"nombres",label:"NOMBRES",field:"nombres",align:"left"},{name:"apellidos",label:"APELLIDOS",field:"apellidos",align:"left"},{name:"fechaing",label:"FECHA ING",field:"fechaing",align:"left"}]}},created(){this.listadoAfiliado()},methods:{asistencia(e){this.$api.post("asistencialocal",{afiliado_id:e.id}).then((e=>{console.log(e.data);let o=e.data;const l=new b.ZP;let t="<style>        .titulo1{font-size:10px; text-align: center;}        .titulo2{font-size:14px; text-align: center; font-weight: bold;}        .titulo3{font-size:10px; text-align: center;}        .titulo5{font-size:8px; text-align: center;}        .titulo4{font-size:12px; text-align: center; font-weight: bold;}        .texto1{font-size:10px; text-align: center; font-weight: normal;}        .texto2{font-size:14px; text-align: center; font-weight: normal;}        .texto3{font-size:8px; text-align: center; font-weight: normal;}        table{width:100%}        img{width:70px;height:70px;}        </style>          <div id='print'>          <table>          <tr><td style='width:20%'><img src='images/logo.png'></td>          <td class='titulo1'  style='width:50%'>SINDICATO MIXTO DE TRANSPORTE<br><span class='titulo2'>26 DE JULIO</span><br><span class='titulo3' FUNDADO EL 26 DE JULIO DE 1970 <br> RESOLUCION SUPREMA 27465</span><br><br><span class='titulo2'> ASISTENCIA</span></td>          <td class='titulo1'> FECHA<br>"+o.fecha+" "+o.hora+"<br><span class='titulo5'> N° Movil "+o.afiliado.codigo+" </span><br><span   >No "+o.id+"</span></td></tr>          </table>          <div class='col-12 titulo4'>AFILIADO</div><div class='col-12 texto2'>"+o.afiliado.nombres+" "+o.afiliado.apellidos+"</div>          <div class='titulo4'>Muchas gracias por su Asistencia</div>          </div><br><br>          <table><tr>          <td class='texto3'>Secretario de Hacienda<br>VoBo</td><td class='texto3'>Agente de Control</td>          </tr></table>          </div>";document.getElementById("print").innerHTML=t,l.print(document.getElementById("print"))})).catch((e=>{this.$q.notify({message:e.response.data.message,color:"negative",position:"top",timeout:2e3})}))},listreg(){this.afiliado={fechaing:ee.ZP.formatDate(Date.now(),"YYYY-MM-DD")},this.afiliado.expedido=this.exped[0],this.dialogRegistro=!0},listadoAfiliado(){this.$api.get("afiliado").then((e=>{this.afiliados=e.data}))},onSubmit(){this.loading=!0,this.listadoAfiliado(),this.afiliados.forEach((e=>{if(e.ci==this.afiliado.ci)return this.$q.notify({message:"El carnet se encuentra registrado",icon:"info",color:"red"}),this.loading=!1,!1})),this.$api.post("afiliado",this.afiliado).then((e=>{this.$q.notify({message:"Afiliado Registrado",icon:"done",color:"green"}),this.dialogRegistro=!1,this.listadoAfiliado(),this.loading=!1}))},updateAfiliado(){this.loading=!0,this.$api.put("afiliado/"+this.afiliado2.id,this.afiliado2).then((e=>{this.$q.notify({message:"Afiliado Modificado",icon:"done",color:"green"}),this.dialogModificar=!1,this.listadoAfiliado(),this.loading=!1}))},EliminarAfiliado(e){this.$q.dialog({title:"Eliminar Afiliado",message:"Esta seguro de eliminar?",cancel:!0,persistent:!1}).onOk((()=>{this.$api.delete("afiliado/"+e.id).then((e=>{this.$q.notify({message:"Afiliado Eliminado",icon:"done",color:"red"}),this.listadoAfiliado()}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}}},pt=(0,r.Z)(ut,[["render",ct]]),mt=pt;I()(ut,"components",{QPage:_.Z,QTable:A.Z,QTd:C.Z,QBtn:y.Z,QInput:V.Z,QIcon:O.Z});const ht={class:"col-12"},ft=(0,n._)("div",{class:"text-h5 text-center text-bold"},"LISTA DE CHOFERES",-1),gt={style:{padding:"0","list-style":"none"}},bt=(0,n._)("div",{class:"text-h6"},"REGISTRO DE CHOFER",-1),vt=(0,n._)("div",{class:"text-h6"},"MODIFICAR DE CHOFER",-1),wt=(0,n._)("div",{id:"print",class:"hidden"},null,-1),xt=(0,n._)("div",{class:"text-h6"},"AFILIADOS",-1),_t=(0,n._)("div",{class:"text-h6"},"FOTO",-1),At=(0,n._)("div",{id:"print",class:"hidden"},null,-1);function Vt(e,o,l,i,a,s){const d=(0,n.up)("q-tooltip"),r=(0,n.up)("q-btn"),c=(0,n.up)("q-td"),u=(0,n.up)("q-img"),p=(0,n.up)("q-icon"),m=(0,n.up)("q-input"),h=(0,n.up)("q-table"),f=(0,n.up)("q-card-section"),g=(0,n.up)("q-select"),b=(0,n.up)("q-card-actions"),v=(0,n.up)("q-form"),w=(0,n.up)("q-card"),x=(0,n.up)("q-dialog"),_=(0,n.up)("q-uploader"),A=(0,n.up)("q-page"),V=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.j4)(A,null,{default:(0,n.w5)((()=>[(0,n._)("div",ht,[ft,(0,n.Wm)(h,{dense:"",rows:a.drivers,columns:a.columns,filter:a.filter,"rows-per-page-options":[0]},{"body-cell-opcion":(0,n.w5)((e=>[(0,n.Wm)(c,{key:"opcion",props:e,"auto-width":""},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{dense:"",icon:"edit",color:"yellow",onClick:o=>s.updriver(e.row)},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Modificar")])),_:1})])),_:2},1032,["onClick"]),(0,n.Wm)(r,{dense:"",icon:"delete",color:"red",onClick:o=>s.Eliminardriver(e.row)},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Eliminar")])),_:1})])),_:2},1032,["onClick"]),(0,n.Wm)(r,{dense:"",icon:"people",color:"primary",onClick:o=>s.afiliadosAdd(e.row)},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Afiliados")])),_:1})])),_:2},1032,["onClick"]),(0,n.Wm)(r,{dense:"",icon:"o_photo_camera",color:"green",onClick:o=>s.foto(e.row)},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Foto")])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),"body-cell-foto":(0,n.w5)((o=>[(0,n.Wm)(c,{key:"foto",props:o,"auto-width":"",onClick:e=>s.viewDrivers(o.row)},{default:(0,n.w5)((()=>[null!=o.row.foto&&""!=o.row.foto?((0,n.wg)(),(0,n.j4)(u,{key:0,src:`${e.$url}../images/${o.row.foto}`,style:{width:"50px"}},null,8,["src"])):(0,n.kq)("",!0)])),_:2},1032,["props","onClick"])])),"body-cell-afiliados":(0,n.w5)((e=>[(0,n.Wm)(c,{key:"afiliados",props:e,"auto-width":""},{default:(0,n.w5)((()=>[(0,n._)("ul",gt,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.row.afiliado_driver,(e=>((0,n.wg)(),(0,n.iD)("li",{key:e.id,style:{"list-style":"none","text-transform":"lowercase"}},[(0,n._)("b",null,(0,Eo.zw)(e.fechaingreso),1),(0,n.Uk)(" "+(0,Eo.zw)(e.fechabaja)+" "+(0,Eo.zw)(e.afiliado.apellidos)+" "+(0,Eo.zw)(e.afiliado.nombres)+" ",1),null==e.fechabaja?((0,n.wg)(),(0,n.j4)(r,{key:0,dense:"",rounded:"",size:"7px",icon:"o_delete",color:"red",onClick:o=>s.afiliadosDriverFechaBaja(e.id)},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Dar de baja")])),_:1})])),_:2},1032,["onClick"])):(0,n.kq)("",!0)])))),128))])])),_:2},1032,["props"])])),"top-right":(0,n.w5)((()=>[(0,n.Wm)(r,{label:"Registrar","no-caps":"",color:"green",icon:"person_add",onClick:s.listreg,loading:a.loading},null,8,["onClick","loading"]),(0,n.Wm)(r,{color:"red",icon:"download",label:"PDF",onClick:s.imprimirLista},null,8,["onClick"]),(0,n.Wm)(r,{color:"green-8",label:"EXCEL",onClick:s.exportTable},null,8,["onClick"]),(0,n.Wm)(m,{outlined:"",dense:"",debounce:"300",modelValue:a.filter,"onUpdate:modelValue":o[0]||(o[0]=e=>a.filter=e),placeholder:"Buscar"},{append:(0,n.w5)((()=>[(0,n.Wm)(p,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["rows","columns","filter"]),(0,n.Wm)(x,{modelValue:a.dialogRegistro,"onUpdate:modelValue":o[5]||(o[5]=e=>a.dialogRegistro=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{style:{width:"70vh","min-width":"350px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[bt])),_:1}),(0,n.Wm)(v,{onSubmit:(0,t.iM)(s.onSubmit,["prevent"]),class:"q-gutter-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{class:"q-pt-none"},{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n.Wm)(m,{modelValue:a.driver.ci,"onUpdate:modelValue":o[1]||(o[1]=e=>a.driver.ci=e),label:"Cedula identidad",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",null,[(0,n.Wm)(m,{modelValue:a.driver.nombres,"onUpdate:modelValue":o[2]||(o[2]=e=>a.driver.nombres=e),label:"Nombre Completo",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",null,[(0,n.Wm)(m,{modelValue:a.driver.celular,"onUpdate:modelValue":o[3]||(o[3]=e=>a.driver.celular=e),label:"Celular",dense:"",outlined:"",required:""},null,8,["modelValue"])]),(0,n._)("div",null,[(0,n.Wm)(g,{"map-options":"","emit-value":"",dense:"",outlined:"","option-value":"id",modelValue:a.driver.afiliado_id,"onUpdate:modelValue":o[4]||(o[4]=e=>a.driver.afiliado_id=e),options:a.afiliados,label:"Afiliado","use-input":"","input-debounce":"0",onFilter:s.filterFn},null,8,["modelValue","options","onFilter"])])])),_:1}),(0,n.Wm)(b,{align:"right",class:"text-primary"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n.Wm)(r,{flat:"",color:"red",label:"Cancel",icon:"cancel"},null,512),[[V]]),(0,n.Wm)(r,{flat:"",color:"green",label:"Registrar",icon:"send",type:"submit",loading:a.loading},null,8,["loading"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(x,{modelValue:a.dialogModificar,"onUpdate:modelValue":o[9]||(o[9]=e=>a.dialogModificar=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{style:{"min-width":"350px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[vt])),_:1}),(0,n.Wm)(v,{onSubmit:(0,t.iM)(s.updatedriver,["prevent"]),class:"q-gutter-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{class:"q-pt-none"},{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n.Wm)(m,{modelValue:a.driver2.ci,"onUpdate:modelValue":o[6]||(o[6]=e=>a.driver2.ci=e),label:"Cedula",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",null,[(0,n.Wm)(m,{modelValue:a.driver2.nombres,"onUpdate:modelValue":o[7]||(o[7]=e=>a.driver2.nombres=e),label:"Nombre Completo",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",null,[(0,n.Wm)(m,{modelValue:a.driver2.celular,"onUpdate:modelValue":o[8]||(o[8]=e=>a.driver2.celular=e),label:"Celular",dense:"",outlined:"",required:""},null,8,["modelValue"])])])),_:1}),(0,n.Wm)(b,{align:"right",class:"text-primary"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n.Wm)(r,{flat:"",color:"red",label:"Cancel",icon:"cancel"},null,512),[[V]]),(0,n.Wm)(r,{flat:"",color:"green",label:"Modificar",icon:"pencil",type:"submit",loading:a.loading},null,8,["loading"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),wt]),(0,n.Wm)(x,{modelValue:a.dialogAfiliados,"onUpdate:modelValue":o[11]||(o[11]=e=>a.dialogAfiliados=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{style:{width:"70vh","min-width":"350px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[xt])),_:1}),(0,n.Wm)(f,{class:"q-pt-none"},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{onSubmit:(0,t.iM)(s.afiliadosRegister,["prevent"]),class:"q-gutter-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{"map-options":"","emit-value":"",dense:"",outlined:"","option-value":"id",modelValue:a.driver.afiliado_id,"onUpdate:modelValue":o[10]||(o[10]=e=>a.driver.afiliado_id=e),options:a.afiliados,label:"Afiliado","use-input":"","input-debounce":"0",onFilter:s.filterFn},null,8,["modelValue","options","onFilter"]),(0,n.Wm)(b,{align:"right",class:"text-primary"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n.Wm)(r,{flat:"",color:"red",label:"Cancel",icon:"cancel"},null,512),[[V]]),(0,n.Wm)(r,{flat:"",color:"green",label:"Registrar",icon:"send",type:"submit",loading:a.loading},null,8,["loading"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(x,{modelValue:a.dialogPhoto,"onUpdate:modelValue":o[12]||(o[12]=e=>a.dialogPhoto=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(w,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[_t])),_:1}),(0,n.Wm)(f,{class:"q-pt-none"},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{accept:".jpg, .png",multiple:"","auto-upload":"",label:"Arrastra una imagen o haz click para seleccionar",onUploading:s.uploadingFn,onFailed:s.errorFn,ref:"uploader","max-files":"1","auto-expand":"",url:`${e.$url}upload/${a.driver.id}`,"stack-label":"upload image"},null,8,["onUploading","onFailed","url"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),At])),_:1})}const Ot={name:"drivers.vue",data(){return{loading:!1,dialogPhoto:!1,dialogRegistro:!1,dialogAfiliados:!1,dialogModificar:!1,driver:{},driver2:{},drivers:[],afiliados:[],filterAf:[],datoprint:[],filter:"",columns:[{name:"opcion",label:"Opcion",align:"left",field:"opcion"},{name:"foto",label:"foto",field:"foto",align:"left"},{name:"afiliados",label:"afiliado",field:"afiliados",align:"left"},{name:"ci",label:"ci",field:"ci",align:"left"},{name:"nombre",label:"Nombre",field:"nombres",align:"left"},{name:"grupo",label:"Grupo",field:"grupo",align:"left"},{name:"celular",label:"Celular",field:"celular",align:"left"}]}},created(){this.listadoAfiliado(),this.listadodrivers()},methods:{exportTable(){if(0==this.drivers.length)return!1;let e=[{sheet:"Listado",columns:[{label:"N",value:"numero"},{label:"CI",value:"ci"},{label:"NOMBRE",value:"nombres"},{label:"GRUPO",value:"grupo"},{label:"CELULAR",value:"celular"},{label:"AFILIADO",value:"completo"}],content:this.drivers}],o={fileName:"Choferes",extraLength:7,writeOptions:{}};Xe()(e,o)},viewDrivers(e){this.$q.dialog({message:`<img src="${this.$url}../images/${e.foto}" width="100%">`,title:"Foto",html:!0})},imprimirLista(){const e=new b.ZP;let o="<style>        .titulo1{font-size:10px; text-align: center;}        .titulo2{font-size:14px; text-align: center; font-weight: bold;}        .titulo3{font-size:10px; text-align: center;}        .titulo5{font-size:15px; text-align: center;}        .titulo4{font-size:12px; text-align: center; font-weight: bold;}        .texto4{font-size:20px; text-align: center; font-weight: normal;}        .texto5{font-size:28px; text-align: center; font-weight: normal;}        .texto1{font-size:10px; text-align: center; font-weight: normal;}        .texto2{font-size:14px; text-align: center; font-weight: normal;}        .texto3{font-size:8px; text-align: center; font-weight: normal;}        table{width:100%}        table, th, td {        border: 1px solid;        border-collapse: collapse;        }        img{width:70px;height:70px;}        </style>          <div id='print'>          <div class='titulo2'>CHOFERES </div><br>          <table>           <tr><th>Nº</th><th>CI</th><th>NOMBRES</th><th>TELEFONO</th><th>AFILIADO</th></tr>";this.drivers.forEach((e=>{o+="<tr><td>"+e.numero+"</td><td>"+e.ci+"</td><td>"+e.nombres+"</td><td>"+e.celular+"</td><td>"+e.completo+"</td></tr>"})),o+="</table></div>",document.getElementById("print").innerHTML=o,e.print(document.getElementById("print"))},uploadingFn(e){e.xhr.onload=()=>{e.xhr.readyState===e.xhr.DONE&&200===e.xhr.status&&(this.dialogPhoto=!1,this.driver.foto=e.xhr.response)}},errorFn(e){console.log(e)},afiliadosRegister(){this.loading=!0,this.$api.post("afiliadosRegister",{afiliado_id:this.driver.afiliado_id,driver_id:this.driver.id}).then((e=>{this.loading=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Registro exitoso",position:"top"}),this.dialogAfiliados=!1,this.listadodrivers()}))},filterFn(e,o){o(""!==e?()=>{const o=e.toLowerCase();this.afiliados=this.filterAf.filter((e=>e.label.toLowerCase().indexOf(o)>-1))}:()=>{this.afiliados=this.filterAf})},listreg(){this.driver={},this.dialogRegistro=!0},afiliadosDriverFechaBaja(e){this.$q.dialog({title:"Seguro que desea dar de baja?",message:"Esta accion no se puede revertir",cancel:!0,persistent:!0}).onOk((o=>{this.loading=!0,this.$api.post("afiliadosDriverFechaBaja",{id:e,fecha_baja:o}).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Registro exitoso",position:"top"}),this.listadodrivers()})).finally((()=>{this.loading=!1}))}))},listadoAfiliado(){this.afiliados=[],this.$api.get("afiliado").then((e=>{e.data.forEach((e=>{e.label=e.nombres+" "+e.apellidos,this.afiliados.push(e)})),this.filterAf=this.afiliados}))},listadodrivers(){this.drivers=[],this.$api.get("driver").then((e=>{console.log(e.data);let o=1,l=0,t="";e.data.forEach((e=>{l=e.afiliado_driver.length,t=e.afiliado_driver[l-1].afiliado,e.numero=o,e.completo=t.nombres+" "+t.apellidos,o++,this.drivers.push(e)}))}))},onSubmit(){if(this.loading=!0,this.drivers.forEach((e=>{if(e.ci==this.driver.ci)return this.$q.notify({message:"El ci encuentra registrado",icon:"info",color:"red"}),this.loading=!1,!1})),void 0==this.driver.afiliado_id)return this.$q.notify({message:"Seleccione un afiliado",icon:"info",color:"red",position:"top"}),this.loading=!1,!1;this.$api.post("driver",this.driver).then((e=>{this.$q.notify({message:"Chofer Registrado",icon:"done",color:"green"}),this.dialogRegistro=!1,this.listadodrivers(),this.loading=!1}))},updriver(e){this.driver2=e,this.dialogModificar=!0},updatedriver(){this.loading=!0,this.$api.put("driver/"+this.driver2.id,this.driver2).then((e=>{this.$q.notify({message:"driver Modificado",icon:"done",color:"green"}),this.dialogModificar=!1,this.listadoAfiliado(),this.loading=!1}))},foto(e){this.driver=e,this.dialogPhoto=!0},afiliadosAdd(e){this.dialogAfiliados=!0,this.driver=e},Eliminardriver(e){this.$q.dialog({title:"Eliminar driver",message:"Esta seguro de eliminar?",cancel:!0,persistent:!1}).onOk((()=>{this.$api.delete("driver/"+e.id).then((e=>{this.$q.notify({message:"driver Eliminado",icon:"done",color:"red"}),this.listadodrivers()}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}}};var Ct=l(335),yt=l(4343);const Et=(0,r.Z)(Ot,[["render",Vt]]),qt=Et;I()(Ot,"components",{QPage:_.Z,QTable:A.Z,QTd:C.Z,QBtn:y.Z,QTooltip:te.Z,QImg:Ct.Z,QInput:V.Z,QIcon:O.Z,QDialog:ie.Z,QCard:ae.Z,QCardSection:ne.Z,QForm:se.Z,QSelect:de.Z,QCardActions:re.Z,QUploader:yt.Z}),I()(Ot,"directives",{ClosePopup:ce.Z});const It=(0,n._)("div",{class:"text-h5",align:"center"},"CANCELACION DE CHOFERES",-1),Wt={class:"row"},Dt={class:"col-3"},kt={class:"col-3"},Pt={class:"col-3 flex flex-center"},Ut={class:"row"},St={class:"col-3"},Lt={class:"col-3"},Rt={class:"col-3"},jt=(0,n._)("div",{id:"print",class:"hidden"},null,-1);function Mt(e,o,l,t,i,a){const s=(0,n.up)("q-input"),d=(0,n.up)("q-btn"),r=(0,n.up)("q-form"),c=(0,n.up)("q-select"),u=(0,n.up)("q-icon"),p=(0,n.up)("q-td"),m=(0,n.up)("q-table"),h=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(h,{class:"q-pa-xs"},{default:(0,n.w5)((()=>[It,(0,n.Wm)(r,{onSubmit:a.consultar,class:"q-gutter-md"},{default:(0,n.w5)((()=>[(0,n._)("div",Wt,[(0,n._)("div",Dt,[(0,n.Wm)(s,{modelValue:i.ini,"onUpdate:modelValue":o[0]||(o[0]=e=>i.ini=e),type:"date",label:"Fecha Desde",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",kt,[(0,n.Wm)(s,{modelValue:i.fin,"onUpdate:modelValue":o[1]||(o[1]=e=>i.fin=e),type:"date",label:"Fecha Hast",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",Pt,[(0,n.Wm)(d,{color:"green",icon:"search",label:"Buscar",type:"submit"})])])])),_:1},8,["onSubmit"]),(0,n._)("div",Ut,[(0,n._)("div",St,[(0,n.Wm)(c,{outlined:"",modelValue:i.tipo,"onUpdate:modelValue":o[2]||(o[2]=e=>i.tipo=e),options:i.tipos,label:"Motivo",dense:""},null,8,["modelValue","options"])]),(0,n._)("div",Lt,[(0,n.Wm)(c,{outlined:"",modelValue:i.driver,"onUpdate:modelValue":o[3]||(o[3]=e=>i.driver=e),options:i.drivers,label:"Chofer","use-input":"","input-debounce":"0",onFilter:a.filterFn,dense:""},null,8,["modelValue","options","onFilter"])]),(0,n._)("div",Rt,[(0,n.Wm)(d,{color:"green",label:"Registrar",dense:"",onClick:a.registrar},null,8,["onClick"])])]),(0,n.Wm)(m,{rows:i.pagos,columns:i.columns,dense:"","rows-per-page-options":[20,50,100,0],filter:i.filter},{"top-right":(0,n.w5)((()=>[(0,n.Wm)(s,{borderless:"",dense:"",debounce:"300",modelValue:i.filter,"onUpdate:modelValue":o[4]||(o[4]=e=>i.filter=e),placeholder:"Buscar"},{append:(0,n.w5)((()=>[(0,n.Wm)(u,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-opcion":(0,n.w5)((e=>[(0,n.Wm)(p,{props:e,"auto-width":""},{default:(0,n.w5)((()=>[0==e.row.anulado?((0,n.wg)(),(0,n.j4)(d,{key:0,icon:"print",dense:"",color:"info",onClick:o=>a.printPago(e.row)},null,8,["onClick"])):(0,n.kq)("",!0),0==e.row.anulado?((0,n.wg)(),(0,n.j4)(d,{key:1,icon:"delete",dense:"",color:"red",onClick:o=>a.anularPago(e.row)},null,8,["onClick"])):(0,n.kq)("",!0)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"]),jt])),_:1})}const Tt={name:"Pagos",data(){return{url:"https://bbio.tuprogam.com/api/",tipos:[{label:"Nuevo Ingreso",monto:500},{label:"Cuota",monto:23}],filterPagos:"",pagos:[],moment:Xo(),semanal:[],driver:{label:""},drivers:[],filterDr:[],filter:"",cog:"SI",titulos:[],resumen:[],tipo:{},ini:Xo()().day("Monday").format("YYYY-MM-DD"),fin:Xo()().day("Saturday").add(1,"days").format("YYYY-MM-DD"),columns:[{name:"opcion",label:"OPCION",field:"opcion"},{name:"id",label:"ID",field:"id"},{name:"monto",label:"MONTO",field:"monto"},{name:"fecha",label:"FECHA",field:"fecha"},{name:"motivo",label:"motivo",field:"motivo"},{name:"driver",label:"driver",field:e=>e.driver.nombres}]}},created(){this.tipo=this.tipos[1],this.consultar(),this.listadodrivers()},methods:{filterFn(e,o){o(""!==e?()=>{const o=e.toLowerCase();this.drivers=this.filterAf.filter((e=>e.label.toLowerCase().indexOf(o)>-1))}:()=>{this.drivers=this.filterDr})},consultar(){this.$api.post("consultachofer",{ini:this.ini,fin:this.fin}).then((e=>{this.pagos=e.data}))},listadodrivers(){this.drivers=[],this.$api.get("listDriver").then((e=>{e.data.forEach((e=>{e.label=e.nombres,this.drivers.push(e)})),this.filterDr=this.drivers}))},printPago(e){console.log(e);const o=new b.ZP;let l="<style>        .titulo1{font-size:10px; text-align: center;}        .titulo2{font-size:14px; text-align: center; font-weight: bold;}        .titulo3{font-size:10px; text-align: center;}        .titulo5{font-size:15px; text-align: center;}        .titulo4{font-size:12px; text-align: center; font-weight: bold;}        .texto4{font-size:20px; text-align: center; font-weight: normal;}        .texto5{font-size:28px; text-align: center; font-weight: normal;}        .texto1{font-size:10px; text-align: center; font-weight: normal;}        .texto2{font-size:14px; text-align: center; font-weight: normal;}        .texto3{font-size:8px; text-align: center; font-weight: normal;}        table{width:100%}        img{width:70px;height:70px;}        </style>          <div id='print'><table>          <tr><td style='width:20%'><img src='images/logo.png'></td>          <td class='titulo1' >SINDICATO MIXTO DE TRANSPORTE<br><span class='titulo2'>26 DE JULIO</span><br><span class='titulo3' FUNDADO EL 26 DE JULIO DE 1970 <br> RESOLUCION SUPREMA 27465</span><br><br><span class='titulo2'> HOJA DE APORTES</span></td>          <td class='titulo1'> FECHA<br>"+e.fecha+"<br><span   >No "+e.id+"</span></td></tr>          </table>          <table><tr>          <td class='col-4 titulo4'>TOTAL Bs<br><span class='texto1'>"+parseFloat(e.monto).toFixed(2)+"</span></td>          </tr></table>          <div class='col-12 titulo4'>CHOFER</div><div class='col-12 texto2'>"+e.driver.nombres+"</div>          </div><br><br>          <table><tr>          <td class='texto3'>Secretario de Hacienda<br>VoBo</td><td class='texto3'>Agente de Control</td>          </tr></table>          </div>";document.getElementById("print").innerHTML=l,o.print(document.getElementById("print"))},registrar(){if(void 0==this.driver.id)return!1;this.$api.post("pagoextra",{monto:this.tipo.monto,motivo:this.tipo.label,fecha:Xo()().format("YYYY-MM-DD"),driver_id:this.driver.id}).then((e=>{this.printPago(e.data),this.driver={label:""},this.tipo=this.tipos[1],this.consultar()}))},anularPago(e){this.$q.dialog({title:"ANULAR PAGO",message:"Cual es el motivo ?",prompt:{model:"",type:"text"},cancel:!0,persistent:!1}).onOk((o=>{if(""==o)return!1;this.$api.post("anularExtra",{pago:e.id,motivo:o}).then((e=>{console.log(e.data),this.consultar()}))})).onCancel((()=>{})).onDismiss((()=>{}))}},computed:{}},Nt=(0,r.Z)(Tt,[["render",Mt]]),zt=Nt;I()(Tt,"components",{QPage:_.Z,QForm:se.Z,QInput:V.Z,QBtn:y.Z,QSelect:de.Z,QTable:A.Z,QIcon:O.Z,QTd:C.Z});const Zt=(0,n._)("div",{class:"text-h5",align:"center"},"CANCELACION DE AFILIADOS",-1),$t={class:"row"},Ft={class:"col-3"},Qt={class:"col-3 flex flex-center"},Bt={key:0,class:"row"},Gt={class:"col-4"},Yt=(0,n._)("b",null,"CI: ",-1),Ht={class:"col-4"},Jt=(0,n._)("b",null,"EXP: ",-1),Xt={class:"col-4"},Kt=(0,n._)("b",null,"Nombres: ",-1),ei={class:"col-4"},oi=(0,n._)("b",null,"Apellidos: ",-1),li={class:"col-4"},ti=(0,n._)("b",null,"Telefono: ",-1),ii=(0,n._)("div",{id:"print",class:"hidden"},null,-1);function ai(e,o,l,i,a,s){const d=(0,n.up)("q-input"),r=(0,n.up)("q-btn"),c=(0,n.up)("q-form"),u=(0,n.up)("q-icon"),p=(0,n.up)("q-td"),m=(0,n.up)("q-table"),h=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(h,{class:"q-pa-xs"},{default:(0,n.w5)((()=>[Zt,(0,n.Wm)(c,{onSubmit:(0,t.iM)(s.consultar,["prevent"]),class:"q-gutter-md"},{default:(0,n.w5)((()=>[(0,n._)("div",$t,[(0,n._)("div",Ft,[(0,n.Wm)(d,{modelValue:a.ci,"onUpdate:modelValue":o[0]||(o[0]=e=>a.ci=e),label:"Cedula Identidad",outlined:"",dense:"",required:""},null,8,["modelValue"])]),(0,n._)("div",Qt,[(0,n.Wm)(r,{color:"green",icon:"search",label:"Buscar",type:"submit"})])])])),_:1},8,["onSubmit"]),void 0!=a.afiliado.id?((0,n.wg)(),(0,n.iD)("div",Bt,[(0,n._)("div",Gt,[Yt,(0,n.Uk)(" "+(0,Eo.zw)(a.afiliado.ci),1)]),(0,n._)("div",Ht,[Jt,(0,n.Uk)(" "+(0,Eo.zw)(a.afiliado.expedido),1)]),(0,n._)("div",Xt,[Kt,(0,n.Uk)(" "+(0,Eo.zw)(a.afiliado.nombres),1)]),(0,n._)("div",ei,[oi,(0,n.Uk)(" "+(0,Eo.zw)(a.afiliado.apellidos),1)]),(0,n._)("div",li,[ti,(0,n.Uk)(" "+(0,Eo.zw)(a.afiliado.telefono),1)])])):(0,n.kq)("",!0),void 0!=a.afiliado.id?((0,n.wg)(),(0,n.j4)(m,{key:1,rows:a.afiliado.vehiculos,columns:a.columns,dense:"","rows-per-page-options":[20,50,100,0],filter:a.filter},{"top-right":(0,n.w5)((()=>[(0,n.Wm)(d,{borderless:"",dense:"",debounce:"300",modelValue:a.filter,"onUpdate:modelValue":o[1]||(o[1]=e=>a.filter=e),placeholder:"Buscar"},{append:(0,n.w5)((()=>[(0,n.Wm)(u,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-opcion":(0,n.w5)((e=>[(0,n.Wm)(p,{props:e,"auto-width":""},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{icon:"payments",dense:"",color:"green",onClick:o=>s.irPago(e.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])):(0,n.kq)("",!0),ii])),_:1})}const ni={name:"Pagos",data(){return{url:"https://bbio.tuprogam.com/api/",tipos:[{label:"Nuevo Ingreso",monto:500},{label:"Cuota",monto:20}],filterPagos:"",pagos:[],moment:Xo(),afiliado:{},driver:{label:""},drivers:[],filterDr:[],filter:"",cog:"SI",ci:"",titulos:[],resumen:[],tipo:{},columns:[{name:"opcion",label:"OPCION",field:"opcion"},{name:"placa",label:"placa",field:"placa"},{name:"codmovil",label:"codmovil",field:"codmovil"},{name:"codcolor",label:"codcolor",field:"codcolor"},{name:"tipo",label:"tipo",field:"tipo"},{name:"modelo",label:"modelo",field:"modelo"},{name:"marca",label:"marca",field:"marca"},{name:"grupo",label:"grupo",field:e=>e.grupo.tipo}]}},created(){},methods:{filterFn(e,o){o(""!==e?()=>{const o=e.toLowerCase();this.drivers=this.filterAf.filter((e=>e.label.toLowerCase().indexOf(o)>-1))}:()=>{this.drivers=this.filterDr})},consultar(){this.afiliado={},this.$api.get("searchAfiliado/"+this.ci).then((e=>{""==e.data.bloqueado?this.afiliado=e.data:this.$q.notify({message:e.data.bloqueado,icon:"info",color:"red",position:"top"})}))},irPago(e){e.vehiculo_id=e.id,console.log(e),this.$q.dialog({title:"REALIZAR EL PAGO",message:"Esta Seguro de realizar  ?",cancel:!0,persistent:!1}).onOk((()=>{this.$api.post("pago",e).then((e=>{this.$q.notify({message:"Pago Realizado Correctamente",icon:"info",color:"green"})})).catch((e=>{this.$q.notify({message:e.message,icon:"info",color:"red"})}))})).onCancel((()=>{})).onDismiss((()=>{}))},printPago(e){console.log(e);const o=new b.ZP;let l="<style>        .titulo1{font-size:10px; text-align: center;}        .titulo2{font-size:14px; text-align: center; font-weight: bold;}        .titulo3{font-size:10px; text-align: center;}        .titulo5{font-size:15px; text-align: center;}        .titulo4{font-size:12px; text-align: center; font-weight: bold;}        .texto4{font-size:20px; text-align: center; font-weight: normal;}        .texto5{font-size:28px; text-align: center; font-weight: normal;}        .texto1{font-size:10px; text-align: center; font-weight: normal;}        .texto2{font-size:14px; text-align: center; font-weight: normal;}        .texto3{font-size:8px; text-align: center; font-weight: normal;}        table{width:100%}        img{width:70px;height:70px;}        </style>          <div id='print'><table>          <tr><td style='width:20%'><img src='images/logo.png'></td>          <td class='titulo1' >SINDICATO MIXTO DE TRANSPORTE<br><span class='titulo2'>26 DE JULIO</span><br><span class='titulo3' FUNDADO EL 26 DE JULIO DE 1970 <br> RESOLUCION SUPREMA 27465</span><br><br><span class='titulo2'> HOJA DE APORTES</span></td>          <td class='titulo1'> FECHA<br>"+e.fecha+"<br><span   >No "+e.id+"</span></td></tr>          </table>          <table><tr>          <td class='col-4 titulo4'>TOTAL Bs<br><span class='texto1'>"+parseFloat(e.monto).toFixed(2)+"</span></td>          </tr></table>          <div class='col-12 titulo4'>CHOFER</div><div class='col-12 texto2'>"+e.driver.nombres+"</div>          </div><br><br>          <table><tr>          <td class='texto3'>Secretario de Hacienda<br>VoBo</td><td class='texto3'>Agente de Control</td>          </tr></table>          </div>";document.getElementById("print").innerHTML=l,o.print(document.getElementById("print"))}},computed:{}},si=(0,r.Z)(ni,[["render",ai]]),di=si;I()(ni,"components",{QPage:_.Z,QForm:se.Z,QInput:V.Z,QBtn:y.Z,QTable:A.Z,QIcon:O.Z,QTd:C.Z});const ri=[{path:"/",component:()=>Promise.all([l.e(736),l.e(623)]).then(l.bind(l,5623)),children:[{path:"",component:()=>l.e(944).then(l.bind(l,1944)),meta:{requiresAuth:!0}},{path:"/impresion",component:D,meta:{requiresAuth:!0}},{path:"/afiliados",component:pe,meta:{requiresAuth:!0}},{path:"/vehiculos",component:oo,meta:{requiresAuth:!0}},{path:"/grupos",component:yo,meta:{requiresAuth:!0}},{path:"/pagos",component:ll,meta:{requiresAuth:!0}},{path:"/listas",component:rl,meta:{requiresAuth:!0}},{path:"/asistencia",component:Vl,meta:{requiresAuth:!0}},{path:"/usuarios",component:Ml,meta:{requiresAuth:!0}},{path:"/asistenciaManual",component:mt,meta:{requiresAuth:!0}},{path:"/choferes",component:qt,meta:{requiresAuth:!0}},{path:"/Pagochofer",component:zt,meta:{requiresAuth:!0}},{path:"/Pagoafiliado",component:di,meta:{requiresAuth:!0}}]},{path:"/login",component:nt},{path:"/:catchAll(.*)*",component:()=>l.e(862).then(l.bind(l,1862))}],ci=ri,ui=(0,p.BC)((function(){const e=f.r5,o=(0,f.p7)({scrollBehavior:()=>({left:0,top:0}),routes:ci,history:e("")});return o.beforeEach(((e,o,l)=>{if(e.matched.some((e=>e.meta.requiresAuth))){if((0,v.c)().isLoggedIn)return void l();l("/login")}else l()})),o}));async function pi(e,o){const l=e(u);l.use(i.Z,o);const t="function"===typeof h?await h({}):h;l.use(t);const n=(0,a.Xl)("function"===typeof ui?await ui({store:t}):ui);return t.use((({store:e})=>{e.router=n})),{app:l,store:t,router:n}}var mi=l(8934),hi=l(7286),fi=l(6827),gi=l(6950),bi=l(7159);const vi={config:{},lang:mi.Z,plugins:{Dialog:hi.Z,Notify:fi.Z,Loading:gi.Z,LoadingBar:bi.Z}};var wi=l(368);(0,wi.z)("service-worker.js",{ready(){},registered(){},cached(){},updatefound(){},updated(){},offline(){},error(){}}),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&window.navigator.standalone&&l.e(736).then(l.t.bind(l,4848,23));const xi="";async function _i({app:e,router:o,store:l},t){let i=!1;const a=e=>{try{return o.resolve(e).href}catch(l){}return Object(e)===e?null:e},n=e=>{if(i=!0,"string"===typeof e&&/^https?:\/\//.test(e))return void(window.location.href=e);const o=a(e);null!==o&&(window.location.href=o,window.location.reload())},s=window.location.href.replace(window.location.origin,"");for(let r=0;!1===i&&r<t.length;r++)try{await t[r]({app:e,router:o,store:l,ssrContext:null,redirect:n,urlPath:s,publicPath:xi})}catch(d){return d&&d.url?void n(d.url):void console.error("[Quasar] boot error:",d)}!0!==i&&(e.use(o),e.mount("#q-app"))}pi(t.ri,vi).then((e=>Promise.allSettled([Promise.resolve().then(l.bind(l,1569))]).then((o=>{const l=o.map((e=>{if("rejected"!==e.status)return e.value.default;console.error("[Quasar] boot error:",e.reason)})).filter((e=>"function"===typeof e));_i(e,l)}))))},1569:(e,o,l)=>{"use strict";l.r(o),l.d(o,{api:()=>s,default:()=>d});l(9665);var t=l(3340),i=l(9981),a=l.n(i),n=l(3285);const s=a().create({baseURL:"https://bbio.tuprogam.com/api/"}),d=(0,t.xr)((({app:e,router:o})=>{e.config.globalProperties.$axios=a(),e.config.globalProperties.$api=s,e.config.globalProperties.$url="https://bbio.tuprogam.com/api/";const l=localStorage.getItem("tokenBio");l?(s.defaults.headers.common.Authorization=`Bearer ${l}`,s.post("me").then((e=>{(0,n.c)().user=e.data,(0,n.c)().isLoggedIn=!0,e.data.permisos.forEach((e=>{1==e.id&&((0,n.c)().booluser=!0),2==e.id&&((0,n.c)().boolafiliado=!0),3==e.id&&((0,n.c)().boolgrupo=!0),4==e.id&&((0,n.c)().boolvehiculo=!0),5==e.id&&((0,n.c)().boolpago=!0),6==e.id&&((0,n.c)().boolprint=!0),7==e.id&&((0,n.c)().boolasistencia=!0)}))})).catch((l=>{e.config.globalProperties.$api.defaults.headers.common["Authorization"]="",(0,n.c)().user={},localStorage.removeItem("tokenBio"),(0,n.c)().isLoggedIn=!1,(0,n.c)().booluser=!1,(0,n.c)().boolafiliado=!1,(0,n.c)().boolgrupo=!1,(0,n.c)().boolvehiculo=!1,(0,n.c)().boolpago=!1,(0,n.c)().boolprint=!1,o.push("/login")}))):(o.push("/login"),(0,n.c)().user={},(0,n.c)().isLoggedIn=!1,(0,n.c)().booluser=!1,(0,n.c)().boolafiliado=!1,(0,n.c)().boolgrupo=!1,(0,n.c)().boolvehiculo=!1,(0,n.c)().boolpago=!1,(0,n.c)().boolprint=!1,(0,n.c)().boolasistencia=!1,localStorage.removeItem("tokenBio"),(0,n.c)().isLoggedIn=!1)}))},3285:(e,o,l)=>{"use strict";l.d(o,{c:()=>i});var t=l(3746);const i=(0,t.Q_)("global",{state:()=>({counter:0,user:{},eventNumber:0,isLoggedIn:!!localStorage.getItem("tokenBio"),socket:!1,booluser:!1,boolafiliado:!1,boolgrupo:!1,boolvehiculo:!1,boolpago:!1,boolprint:!1}),getters:{doubleCount:e=>2*e.counter},actions:{increment(){this.counter++}}})},6700:(e,o,l)=>{var t={"./af":3902,"./af.js":3902,"./ar":6314,"./ar-dz":5666,"./ar-dz.js":5666,"./ar-kw":6591,"./ar-kw.js":6591,"./ar-ly":7900,"./ar-ly.js":7900,"./ar-ma":5667,"./ar-ma.js":5667,"./ar-sa":4092,"./ar-sa.js":4092,"./ar-tn":1379,"./ar-tn.js":1379,"./ar.js":6314,"./az":1699,"./az.js":1699,"./be":8988,"./be.js":8988,"./bg":7437,"./bg.js":7437,"./bm":7947,"./bm.js":7947,"./bn":2851,"./bn-bd":4905,"./bn-bd.js":4905,"./bn.js":2851,"./bo":7346,"./bo.js":7346,"./br":1711,"./br.js":1711,"./bs":3706,"./bs.js":3706,"./ca":112,"./ca.js":112,"./cs":6406,"./cs.js":6406,"./cv":1853,"./cv.js":1853,"./cy":9766,"./cy.js":9766,"./da":6836,"./da.js":6836,"./de":9320,"./de-at":4904,"./de-at.js":4904,"./de-ch":6710,"./de-ch.js":6710,"./de.js":9320,"./dv":3274,"./dv.js":3274,"./el":286,"./el.js":286,"./en-au":143,"./en-au.js":143,"./en-ca":237,"./en-ca.js":237,"./en-gb":2428,"./en-gb.js":2428,"./en-ie":3349,"./en-ie.js":3349,"./en-il":3764,"./en-il.js":3764,"./en-in":7809,"./en-in.js":7809,"./en-nz":9851,"./en-nz.js":9851,"./en-sg":5594,"./en-sg.js":5594,"./eo":4483,"./eo.js":4483,"./es":2184,"./es-do":5777,"./es-do.js":5777,"./es-mx":9356,"./es-mx.js":9356,"./es-us":8496,"./es-us.js":8496,"./es.js":2184,"./et":7578,"./et.js":7578,"./eu":2092,"./eu.js":2092,"./fa":5927,"./fa.js":5927,"./fi":171,"./fi.js":171,"./fil":2416,"./fil.js":2416,"./fo":9937,"./fo.js":9937,"./fr":5172,"./fr-ca":8249,"./fr-ca.js":8249,"./fr-ch":7541,"./fr-ch.js":7541,"./fr.js":5172,"./fy":7907,"./fy.js":7907,"./ga":6361,"./ga.js":6361,"./gd":2282,"./gd.js":2282,"./gl":2630,"./gl.js":2630,"./gom-deva":680,"./gom-deva.js":680,"./gom-latn":6220,"./gom-latn.js":6220,"./gu":6272,"./gu.js":6272,"./he":5540,"./he.js":5540,"./hi":6067,"./hi.js":6067,"./hr":9669,"./hr.js":9669,"./hu":3396,"./hu.js":3396,"./hy-am":6678,"./hy-am.js":6678,"./id":4812,"./id.js":4812,"./is":4193,"./is.js":4193,"./it":7863,"./it-ch":959,"./it-ch.js":959,"./it.js":7863,"./ja":1809,"./ja.js":1809,"./jv":8657,"./jv.js":8657,"./ka":3290,"./ka.js":3290,"./kk":8418,"./kk.js":8418,"./km":7687,"./km.js":7687,"./kn":1375,"./kn.js":1375,"./ko":2641,"./ko.js":2641,"./ku":3518,"./ku.js":3518,"./ky":5459,"./ky.js":5459,"./lb":1978,"./lb.js":1978,"./lo":6915,"./lo.js":6915,"./lt":8948,"./lt.js":8948,"./lv":2548,"./lv.js":2548,"./me":8608,"./me.js":8608,"./mi":333,"./mi.js":333,"./mk":1876,"./mk.js":1876,"./ml":999,"./ml.js":999,"./mn":4098,"./mn.js":4098,"./mr":6111,"./mr.js":6111,"./ms":3717,"./ms-my":265,"./ms-my.js":265,"./ms.js":3717,"./mt":8980,"./mt.js":8980,"./my":6895,"./my.js":6895,"./nb":5348,"./nb.js":5348,"./ne":1493,"./ne.js":1493,"./nl":4419,"./nl-be":5576,"./nl-be.js":5576,"./nl.js":4419,"./nn":6907,"./nn.js":6907,"./oc-lnc":2321,"./oc-lnc.js":2321,"./pa-in":9239,"./pa-in.js":9239,"./pl":7627,"./pl.js":7627,"./pt":5703,"./pt-br":1623,"./pt-br.js":1623,"./pt.js":5703,"./ro":2747,"./ro.js":2747,"./ru":4420,"./ru.js":4420,"./sd":2148,"./sd.js":2148,"./se":2461,"./se.js":2461,"./si":2783,"./si.js":2783,"./sk":3306,"./sk.js":3306,"./sl":341,"./sl.js":341,"./sq":2768,"./sq.js":2768,"./sr":2451,"./sr-cyrl":3371,"./sr-cyrl.js":3371,"./sr.js":2451,"./ss":8812,"./ss.js":8812,"./sv":3820,"./sv.js":3820,"./sw":3615,"./sw.js":3615,"./ta":2869,"./ta.js":2869,"./te":2044,"./te.js":2044,"./tet":5861,"./tet.js":5861,"./tg":6999,"./tg.js":6999,"./th":1772,"./th.js":1772,"./tk":7443,"./tk.js":7443,"./tl-ph":9786,"./tl-ph.js":9786,"./tlh":2812,"./tlh.js":2812,"./tr":6952,"./tr.js":6952,"./tzl":9573,"./tzl.js":9573,"./tzm":5990,"./tzm-latn":6961,"./tzm-latn.js":6961,"./tzm.js":5990,"./ug-cn":2610,"./ug-cn.js":2610,"./uk":9498,"./uk.js":9498,"./ur":3970,"./ur.js":3970,"./uz":9006,"./uz-latn":26,"./uz-latn.js":26,"./uz.js":9006,"./vi":9962,"./vi.js":9962,"./x-pseudo":8407,"./x-pseudo.js":8407,"./yo":1962,"./yo.js":1962,"./zh-cn":8909,"./zh-cn.js":8909,"./zh-hk":4014,"./zh-hk.js":4014,"./zh-mo":996,"./zh-mo.js":996,"./zh-tw":6327,"./zh-tw.js":6327};function i(e){var o=a(e);return l(o)}function a(e){if(!l.o(t,e)){var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return t[e]}i.keys=function(){return Object.keys(t)},i.resolve=a,e.exports=i,i.id=6700}},o={};function l(t){var i=o[t];if(void 0!==i)return i.exports;var a=o[t]={id:t,loaded:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.loaded=!0,a.exports}l.m=e,(()=>{var e=[];l.O=(o,t,i,a)=>{if(!t){var n=1/0;for(c=0;c<e.length;c++){for(var[t,i,a]=e[c],s=!0,d=0;d<t.length;d++)(!1&a||n>=a)&&Object.keys(l.O).every((e=>l.O[e](t[d])))?t.splice(d--,1):(s=!1,a<n&&(n=a));if(s){e.splice(c--,1);var r=i();void 0!==r&&(o=r)}}return o}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[t,i,a]}})(),(()=>{l.n=e=>{var o=e&&e.__esModule?()=>e["default"]:()=>e;return l.d(o,{a:o}),o}})(),(()=>{var e,o=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;l.t=function(t,i){if(1&i&&(t=this(t)),8&i)return t;if("object"===typeof t&&t){if(4&i&&t.__esModule)return t;if(16&i&&"function"===typeof t.then)return t}var a=Object.create(null);l.r(a);var n={};e=e||[null,o({}),o([]),o(o)];for(var s=2&i&&t;"object"==typeof s&&!~e.indexOf(s);s=o(s))Object.getOwnPropertyNames(s).forEach((e=>n[e]=()=>t[e]));return n["default"]=()=>t,l.d(a,n),a}})(),(()=>{l.d=(e,o)=>{for(var t in o)l.o(o,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})}})(),(()=>{l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((o,t)=>(l.f[t](e,o),o)),[]))})(),(()=>{l.u=e=>"js/"+e+"."+{623:"5bcc1ef3",862:"71a9d88d",944:"e17272ec"}[e]+".js"})(),(()=>{l.miniCssF=e=>"css/"+{143:"app",736:"vendor"}[e]+"."+{143:"bee17664",736:"05633844"}[e]+".css"})(),(()=>{l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{l.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o)})(),(()=>{var e={},o="front:";l.l=(t,i,a,n)=>{if(e[t])e[t].push(i);else{var s,d;if(void 0!==a)for(var r=document.getElementsByTagName("script"),c=0;c<r.length;c++){var u=r[c];if(u.getAttribute("src")==t||u.getAttribute("data-webpack")==o+a){s=u;break}}s||(d=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,l.nc&&s.setAttribute("nonce",l.nc),s.setAttribute("data-webpack",o+a),s.src=t),e[t]=[i];var p=(o,l)=>{s.onerror=s.onload=null,clearTimeout(m);var i=e[t];if(delete e[t],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((e=>e(l))),o)return o(l)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),d&&document.head.appendChild(s)}}})(),(()=>{l.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{l.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{l.p=""})(),(()=>{var e={143:0};l.f.j=(o,t)=>{var i=l.o(e,o)?e[o]:void 0;if(0!==i)if(i)t.push(i[2]);else{var a=new Promise(((l,t)=>i=e[o]=[l,t]));t.push(i[2]=a);var n=l.p+l.u(o),s=new Error,d=t=>{if(l.o(e,o)&&(i=e[o],0!==i&&(e[o]=void 0),i)){var a=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;s.message="Loading chunk "+o+" failed.\n("+a+": "+n+")",s.name="ChunkLoadError",s.type=a,s.request=n,i[1](s)}};l.l(n,d,"chunk-"+o,o)}},l.O.j=o=>0===e[o];var o=(o,t)=>{var i,a,[n,s,d]=t,r=0;if(n.some((o=>0!==e[o]))){for(i in s)l.o(s,i)&&(l.m[i]=s[i]);if(d)var c=d(l)}for(o&&o(t);r<n.length;r++)a=n[r],l.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return l.O(c)},t=globalThis["webpackChunkfront"]=globalThis["webpackChunkfront"]||[];t.forEach(o.bind(null,0)),t.push=o.bind(null,t.push.bind(t))})();var t=l.O(void 0,[736],(()=>l(1593)));t=l.O(t)})();